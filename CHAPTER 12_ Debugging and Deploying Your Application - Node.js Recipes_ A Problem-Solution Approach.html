<!DOCTYPE html>
<!-- saved from url=(0102)https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml -->
<html class=" js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" "="" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="1573407" data-user-uuid="29525685-85c9-45c7-9eda-3c178d86398e" data-username="raviguru0007" data-account-type="Trial" data-activated-trial-date="04/17/2017" data-archive="9781430260585" data-publishers="Apress" data-htmlfile-name="9781430260585_Ch12.xhtml" data-epub-title="Node.js Recipes: A Problem-Solution Approach" data-debug="0" data-testing="0"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781430260585"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><script type="text/javascript" src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/510f1a6865"></script><script src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/nr-spa-1026.min.js"></script><script type="text/javascript" async="" src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/linkid.js"></script><script async="" src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/analytics.js"></script><script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={xpid:"VQQDUVVVGwACU1RUAQA="};window.NREUM||(NREUM={}),__nr_require=function(t,e,n){function r(n){if(!e[n]){var o=e[n]={exports:{}};t[n][0].call(o.exports,function(e){var o=t[n][1][e];return r(o||e)},o,o.exports)}return e[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,n){function r(t){try{c.console&&console.log(t)}catch(e){}}var o,i=t("ee"),a=t(19),c={};try{o=localStorage.getItem("__nr_flags").split(","),console&&"function"==typeof console.log&&(c.console=!0,o.indexOf("dev")!==-1&&(c.dev=!0),o.indexOf("nr_dev")!==-1&&(c.nrDev=!0))}catch(s){}c.nrDev&&i.on("internal-error",function(t){r(t.stack)}),c.dev&&i.on("fn-err",function(t,e,n){r(n.stack)}),c.dev&&(r("NR AGENT IN DEVELOPMENT MODE"),r("flags: "+a(c,function(t,e){return t}).join(", ")))},{}],2:[function(t,e,n){function r(t,e,n,r,o){try{d?d-=1:i("err",[o||new UncaughtException(t,e,n)])}catch(c){try{i("ierr",[c,s.now(),!0])}catch(u){}}return"function"==typeof f&&f.apply(this,a(arguments))}function UncaughtException(t,e,n){this.message=t||"Uncaught error with no additional information",this.sourceURL=e,this.line=n}function o(t){i("err",[t,s.now()])}var i=t("handle"),a=t(20),c=t("ee"),s=t("loader"),f=window.onerror,u=!1,d=0;s.features.err=!0,t(1),window.onerror=r;try{throw new Error}catch(p){"stack"in p&&(t(12),t(11),"addEventListener"in window&&t(6),s.xhrWrappable&&t(13),u=!0)}c.on("fn-start",function(t,e,n){u&&(d+=1)}),c.on("fn-err",function(t,e,n){u&&(this.thrown=!0,o(n))}),c.on("fn-end",function(){u&&!this.thrown&&d>0&&(d-=1)}),c.on("internal-error",function(t){i("ierr",[t,s.now(),!0])})},{}],3:[function(t,e,n){t("loader").features.ins=!0},{}],4:[function(t,e,n){function r(){C++,N=y.hash,this[u]=M.now()}function o(){C--,y.hash!==N&&i(0,!0);var t=M.now();this[l]=~~this[l]+t-this[u],this[d]=t}function i(t,e){x.emit("newURL",[""+y,e])}function a(t,e){t.on(e,function(){this[e]=M.now()})}var c="-start",s="-end",f="-body",u="fn"+c,d="fn"+s,p="cb"+c,h="cb"+s,l="jsTime",m="fetch",v="addEventListener",w=window,y=w.location;if(w[v]){var b=t(9),g=t(10),x=t(8),E=t(6),O=t(12),R=t(7),P=t(13),T=t("ee"),S=T.get("tracer");t(14);var M=t("loader");M.features.spa=!0;var N,j=w[v],C=0;T.on(u,r),T.on(p,r),T.on(d,o),T.on(h,o),T.buffer([u,d,"xhr-done","xhr-resolved"]),E.buffer([u]),O.buffer(["setTimeout"+s,"clearTimeout"+c,u]),P.buffer([u,"new-xhr","send-xhr"+c]),R.buffer([m+c,m+"-done",m+f+c,m+f+s]),x.buffer(["newURL"]),b.buffer([u]),g.buffer(["propagate",p,h,"executor-err","resolve"+c]),S.buffer([u,"no-"+u]),a(P,"send-xhr"+c),a(T,"xhr-resolved"),a(T,"xhr-done"),a(R,m+c),a(R,m+"-done"),x.on("pushState-end",i),x.on("replaceState-end",i),j("hashchange",i,!0),j("load",i,!0),j("popstate",function(){i(0,C>1)},!0)}},{}],5:[function(t,e,n){function r(t){}if(window.performance&&window.performance.timing&&window.performance.getEntriesByType){var o=t("ee"),i=t("handle"),a=t(12),c=t(11),s="learResourceTimings",f="addEventListener",u="resourcetimingbufferfull",d="bstResource",p="resource",h="-start",l="-end",m="fn"+h,v="fn"+l,w="bstTimer",y="pushState",b=t("loader");b.features.stn=!0,t(8);var g=NREUM.o.EV;o.on(m,function(t,e){var n=t[0];n instanceof g&&(this.bstStart=b.now())}),o.on(v,function(t,e){var n=t[0];n instanceof g&&i("bst",[n,e,this.bstStart,b.now()])}),a.on(m,function(t,e,n){this.bstStart=b.now(),this.bstType=n}),a.on(v,function(t,e){i(w,[e,this.bstStart,b.now(),this.bstType])}),c.on(m,function(){this.bstStart=b.now()}),c.on(v,function(t,e){i(w,[e,this.bstStart,b.now(),"requestAnimationFrame"])}),o.on(y+h,function(t){this.time=b.now(),this.startPath=location.pathname+location.hash}),o.on(y+l,function(t){i("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),f in window.performance&&(window.performance["c"+s]?window.performance[f](u,function(t){i(d,[window.performance.getEntriesByType(p)]),window.performance["c"+s]()},!1):window.performance[f]("webkit"+u,function(t){i(d,[window.performance.getEntriesByType(p)]),window.performance["webkitC"+s]()},!1)),document[f]("scroll",r,{passive:!0}),document[f]("keypress",r,!1),document[f]("click",r,!1)}},{}],6:[function(t,e,n){function r(t){for(var e=t;e&&!e.hasOwnProperty(u);)e=Object.getPrototypeOf(e);e&&o(e)}function o(t){c.inPlace(t,[u,d],"-",i)}function i(t,e){return t[1]}var a=t("ee").get("events"),c=t(22)(a,!0),s=t("gos"),f=XMLHttpRequest,u="addEventListener",d="removeEventListener";e.exports=a,"getPrototypeOf"in Object?(r(document),r(window),r(f.prototype)):f.prototype.hasOwnProperty(u)&&(o(window),o(f.prototype)),a.on(u+"-start",function(t,e){var n=t[1],r=s(n,"nr@wrapped",function(){function t(){if("function"==typeof n.handleEvent)return n.handleEvent.apply(n,arguments)}var e={object:t,"function":n}[typeof n];return e?c(e,"fn-",null,e.name||"anonymous"):n});this.wrapped=t[1]=r}),a.on(d+"-start",function(t){t[1]=this.wrapped||t[1]})},{}],7:[function(t,e,n){function r(t,e,n){var r=t[e];"function"==typeof r&&(t[e]=function(){var t=r.apply(this,arguments);return o.emit(n+"start",arguments,t),t.then(function(e){return o.emit(n+"end",[null,e],t),e},function(e){throw o.emit(n+"end",[e],t),e})})}var o=t("ee").get("fetch"),i=t(19);e.exports=o;var a=window,c="fetch-",s=c+"body-",f=["arrayBuffer","blob","json","text","formData"],u=a.Request,d=a.Response,p=a.fetch,h="prototype";u&&d&&p&&(i(f,function(t,e){r(u[h],e,s),r(d[h],e,s)}),r(a,"fetch",c),o.on(c+"end",function(t,e){var n=this;e?e.clone().arrayBuffer().then(function(t){n.rxSize=t.byteLength,o.emit(c+"done",[null,e],n)}):o.emit(c+"done",[t],n)}))},{}],8:[function(t,e,n){var r=t("ee").get("history"),o=t(22)(r);e.exports=r,o.inPlace(window.history,["pushState","replaceState"],"-")},{}],9:[function(t,e,n){var r=t("ee").get("mutation"),o=t(22)(r),i=NREUM.o.MO;e.exports=r,i&&(window.MutationObserver=function(t){return this instanceof i?new i(o(t,"fn-")):i.apply(this,arguments)},MutationObserver.prototype=i.prototype)},{}],10:[function(t,e,n){function r(t){var e=a.context(),n=c(t,"executor-",e),r=new f(n);return a.context(r).getCtx=function(){return e},a.emit("new-promise",[r,e],e),r}function o(t,e){return e}var i=t(22),a=t("ee").get("promise"),c=i(a),s=t(19),f=NREUM.o.PR;e.exports=a,f&&(window.Promise=r,["all","race"].forEach(function(t){var e=f[t];f[t]=function(n){function r(t){return function(){a.emit("propagate",[null,!o],i),o=o||!t}}var o=!1;s(n,function(e,n){Promise.resolve(n).then(r("all"===t),r(!1))});var i=e.apply(f,arguments),c=f.resolve(i);return c}}),["resolve","reject"].forEach(function(t){var e=f[t];f[t]=function(t){var n=e.apply(f,arguments);return t!==n&&a.emit("propagate",[t,!0],n),n}}),f.prototype["catch"]=function(t){return this.then(null,t)},f.prototype=Object.create(f.prototype,{constructor:{value:r}}),s(Object.getOwnPropertyNames(f),function(t,e){try{r[e]=f[e]}catch(n){}}),a.on("executor-start",function(t){t[0]=c(t[0],"resolve-",this),t[1]=c(t[1],"resolve-",this)}),a.on("executor-err",function(t,e,n){t[1](n)}),c.inPlace(f.prototype,["then"],"then-",o),a.on("then-start",function(t,e){this.promise=e,t[0]=c(t[0],"cb-",this),t[1]=c(t[1],"cb-",this)}),a.on("then-end",function(t,e,n){this.nextPromise=n;var r=this.promise;a.emit("propagate",[r,!0],n)}),a.on("cb-end",function(t,e,n){a.emit("propagate",[n,!0],this.nextPromise)}),a.on("propagate",function(t,e,n){this.getCtx&&!e||(this.getCtx=function(){if(t instanceof Promise)var e=a.context(t);return e&&e.getCtx?e.getCtx():this})}),r.toString=function(){return""+f})},{}],11:[function(t,e,n){var r=t("ee").get("raf"),o=t(22)(r),i="equestAnimationFrame";e.exports=r,o.inPlace(window,["r"+i,"mozR"+i,"webkitR"+i,"msR"+i],"raf-"),r.on("raf-start",function(t){t[0]=o(t[0],"fn-")})},{}],12:[function(t,e,n){function r(t,e,n){t[0]=a(t[0],"fn-",null,n)}function o(t,e,n){this.method=n,this.timerDuration="number"==typeof t[1]?t[1]:0,t[0]=a(t[0],"fn-",this,n)}var i=t("ee").get("timer"),a=t(22)(i),c="setTimeout",s="setInterval",f="clearTimeout",u="-start",d="-";e.exports=i,a.inPlace(window,[c,"setImmediate"],c+d),a.inPlace(window,[s],s+d),a.inPlace(window,[f,"clearImmediate"],f+d),i.on(s+u,r),i.on(c+u,o)},{}],13:[function(t,e,n){function r(t,e){d.inPlace(e,["onreadystatechange"],"fn-",c)}function o(){var t=this,e=u.context(t);t.readyState>3&&!e.resolved&&(e.resolved=!0,u.emit("xhr-resolved",[],t)),d.inPlace(t,v,"fn-",c)}function i(t){w.push(t),l&&(b=-b,g.data=b)}function a(){for(var t=0;t<w.length;t++)r([],w[t]);w.length&&(w=[])}function c(t,e){return e}function s(t,e){for(var n in t)e[n]=t[n];return e}t(6);var f=t("ee"),u=f.get("xhr"),d=t(22)(u),p=NREUM.o,h=p.XHR,l=p.MO,m="readystatechange",v=["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"],w=[];e.exports=u;var y=window.XMLHttpRequest=function(t){var e=new h(t);try{u.emit("new-xhr",[e],e),e.addEventListener(m,o,!1)}catch(n){try{u.emit("internal-error",[n])}catch(r){}}return e};if(s(h,y),y.prototype=h.prototype,d.inPlace(y.prototype,["open","send"],"-xhr-",c),u.on("send-xhr-start",function(t,e){r(t,e),i(e)}),u.on("open-xhr-start",r),l){var b=1,g=document.createTextNode(b);new l(a).observe(g,{characterData:!0})}else f.on("fn-end",function(t){t[0]&&t[0].type===m||a()})},{}],14:[function(t,e,n){function r(t){var e=this.params,n=this.metrics;if(!this.ended){this.ended=!0;for(var r=0;r<d;r++)t.removeEventListener(u[r],this.listener,!1);if(!e.aborted){if(n.duration=a.now()-this.startTime,4===t.readyState){e.status=t.status;var i=o(t,this.lastSize);if(i&&(n.rxSize=i),this.sameOrigin){var s=t.getResponseHeader("X-NewRelic-App-Data");s&&(e.cat=s.split(", ").pop())}}else e.status=0;n.cbTime=this.cbTime,f.emit("xhr-done",[t],t),c("xhr",[e,n,this.startTime])}}}function o(t,e){var n=t.responseType;if("json"===n&&null!==e)return e;var r="arraybuffer"===n||"blob"===n||"json"===n?t.response:t.responseText;return l(r)}function i(t,e){var n=s(e),r=t.params;r.host=n.hostname+":"+n.port,r.pathname=n.pathname,t.sameOrigin=n.sameOrigin}var a=t("loader");if(a.xhrWrappable){var c=t("handle"),s=t(15),f=t("ee"),u=["load","error","abort","timeout"],d=u.length,p=t("id"),h=t(18),l=t(17),m=window.XMLHttpRequest;a.features.xhr=!0,t(13),f.on("new-xhr",function(t){var e=this;e.totalCbs=0,e.called=0,e.cbTime=0,e.end=r,e.ended=!1,e.xhrGuids={},e.lastSize=null,h&&(h>34||h<10)||window.opera||t.addEventListener("progress",function(t){e.lastSize=t.loaded},!1)}),f.on("open-xhr-start",function(t){this.params={method:t[0]},i(this,t[1]),this.metrics={}}),f.on("open-xhr-end",function(t,e){"loader_config"in NREUM&&"xpid"in NREUM.loader_config&&this.sameOrigin&&e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),f.on("send-xhr-start",function(t,e){var n=this.metrics,r=t[0],o=this;if(n&&r){var i=l(r);i&&(n.txSize=i)}this.startTime=a.now(),this.listener=function(t){try{"abort"===t.type&&(o.params.aborted=!0),("load"!==t.type||o.called===o.totalCbs&&(o.onloadCalled||"function"!=typeof e.onload))&&o.end(e)}catch(n){try{f.emit("internal-error",[n])}catch(r){}}};for(var c=0;c<d;c++)e.addEventListener(u[c],this.listener,!1)}),f.on("xhr-cb-time",function(t,e,n){this.cbTime+=t,e?this.onloadCalled=!0:this.called+=1,this.called!==this.totalCbs||!this.onloadCalled&&"function"==typeof n.onload||this.end(n)}),f.on("xhr-load-added",function(t,e){var n=""+p(t)+!!e;this.xhrGuids&&!this.xhrGuids[n]&&(this.xhrGuids[n]=!0,this.totalCbs+=1)}),f.on("xhr-load-removed",function(t,e){var n=""+p(t)+!!e;this.xhrGuids&&this.xhrGuids[n]&&(delete this.xhrGuids[n],this.totalCbs-=1)}),f.on("addEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-added",[t[1],t[2]],e)}),f.on("removeEventListener-end",function(t,e){e instanceof m&&"load"===t[0]&&f.emit("xhr-load-removed",[t[1],t[2]],e)}),f.on("fn-start",function(t,e,n){e instanceof m&&("onload"===n&&(this.onload=!0),("load"===(t[0]&&t[0].type)||this.onload)&&(this.xhrCbStart=a.now()))}),f.on("fn-end",function(t,e){this.xhrCbStart&&f.emit("xhr-cb-time",[a.now()-this.xhrCbStart,this.onload,e],e)})}},{}],15:[function(t,e,n){e.exports=function(t){var e=document.createElement("a"),n=window.location,r={};e.href=t,r.port=e.port;var o=e.href.split("://");!r.port&&o[1]&&(r.port=o[1].split("/")[0].split("@").pop().split(":")[1]),r.port&&"0"!==r.port||(r.port="https"===o[0]?"443":"80"),r.hostname=e.hostname||n.hostname,r.pathname=e.pathname,r.protocol=o[0],"/"!==r.pathname.charAt(0)&&(r.pathname="/"+r.pathname);var i=!e.protocol||":"===e.protocol||e.protocol===n.protocol,a=e.hostname===document.domain&&e.port===n.port;return r.sameOrigin=i&&(!e.hostname||a),r}},{}],16:[function(t,e,n){function r(){}function o(t,e,n){return function(){return i(t,[f.now()].concat(c(arguments)),e?null:this,n),e?void 0:this}}var i=t("handle"),a=t(19),c=t(20),s=t("ee").get("tracer"),f=t("loader"),u=NREUM;"undefined"==typeof window.newrelic&&(newrelic=u);var d=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],p="api-",h=p+"ixn-";a(d,function(t,e){u[e]=o(p+e,!0,"api")}),u.addPageAction=o(p+"addPageAction",!0),u.setCurrentRouteName=o(p+"routeName",!0),e.exports=newrelic,u.interaction=function(){return(new r).get()};var l=r.prototype={createTracer:function(t,e){var n={},r=this,o="function"==typeof e;return i(h+"tracer",[f.now(),t,n],r),function(){if(s.emit((o?"":"no-")+"fn-start",[f.now(),r,o],n),o)try{return e.apply(this,arguments)}finally{s.emit("fn-end",[f.now()],n)}}}};a("setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(t,e){l[e]=o(h+e)}),newrelic.noticeError=function(t){"string"==typeof t&&(t=new Error(t)),i("err",[t,f.now()])}},{}],17:[function(t,e,n){e.exports=function(t){if("string"==typeof t&&t.length)return t.length;if("object"==typeof t){if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&t.byteLength)return t.byteLength;if("undefined"!=typeof Blob&&t instanceof Blob&&t.size)return t.size;if(!("undefined"!=typeof FormData&&t instanceof FormData))try{return JSON.stringify(t).length}catch(e){return}}}},{}],18:[function(t,e,n){var r=0,o=navigator.userAgent.match(/Firefox[\/\s](\d+\.\d+)/);o&&(r=+o[1]),e.exports=r},{}],19:[function(t,e,n){function r(t,e){var n=[],r="",i=0;for(r in t)o.call(t,r)&&(n[i]=e(r,t[r]),i+=1);return n}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],20:[function(t,e,n){function r(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(o<0?0:o);++r<o;)i[r]=t[e+r];return i}e.exports=r},{}],21:[function(t,e,n){e.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],22:[function(t,e,n){function r(t){return!(t&&t instanceof Function&&t.apply&&!t[a])}var o=t("ee"),i=t(20),a="nr@original",c=Object.prototype.hasOwnProperty,s=!1;e.exports=function(t,e){function n(t,e,n,o){function nrWrapper(){var r,a,c,s;try{a=this,r=i(arguments),c="function"==typeof n?n(r,a):n||{}}catch(f){p([f,"",[r,a,o],c])}u(e+"start",[r,a,o],c);try{return s=t.apply(a,r)}catch(d){throw u(e+"err",[r,a,d],c),d}finally{u(e+"end",[r,a,s],c)}}return r(t)?t:(e||(e=""),nrWrapper[a]=t,d(t,nrWrapper),nrWrapper)}function f(t,e,o,i){o||(o="");var a,c,s,f="-"===o.charAt(0);for(s=0;s<e.length;s++)c=e[s],a=t[c],r(a)||(t[c]=n(a,f?c+o:o,i,c))}function u(n,r,o){if(!s||e){var i=s;s=!0;try{t.emit(n,r,o,e)}catch(a){p([a,n,r,o])}s=i}}function d(t,e){if(Object.defineProperty&&Object.keys)try{var n=Object.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]=e,e}})}),e}catch(r){p([r])}for(var o in t)c.call(t,o)&&(e[o]=t[o]);return e}function p(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t=o),n.inPlace=f,n.flag=a,n}},{}],ee:[function(t,e,n){function r(){}function o(t){function e(t){return t&&t instanceof r?t:t?s(t,c,i):i()}function n(n,r,o,i){if(!p.aborted||i){t&&t(n,r,o);for(var a=e(o),c=l(n),s=c.length,f=0;f<s;f++)c[f].apply(a,r);var d=u[y[n]];return d&&d.push([b,n,r,a]),a}}function h(t,e){w[t]=l(t).concat(e)}function l(t){return w[t]||[]}function m(t){return d[t]=d[t]||o(n)}function v(t,e){f(t,function(t,n){e=e||"feature",y[n]=e,e in u||(u[e]=[])})}var w={},y={},b={on:h,emit:n,get:m,listeners:l,context:e,buffer:v,abort:a,aborted:!1};return b}function i(){return new r}function a(){(u.api||u.feature)&&(p.aborted=!0,u=p.backlog={})}var c="nr@context",s=t("gos"),f=t(19),u={},d={},p=e.exports=o();p.backlog=u},{}],gos:[function(t,e,n){function r(t,e,n){if(o.call(t,e))return t[e];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return t[e]=r,r}var o=Object.prototype.hasOwnProperty;e.exports=r},{}],handle:[function(t,e,n){function r(t,e,n,r){o.buffer([t],r),o.emit(t,e,n)}var o=t("ee").get("handle");e.exports=r,r.ee=o},{}],id:[function(t,e,n){function r(t){var e=typeof t;return!t||"object"!==e&&"function"!==e?-1:t===window?0:a(t,i,function(){return o++})}var o=1,i="nr@id",a=t("gos");e.exports=r},{}],loader:[function(t,e,n){function r(){if(!x++){var t=g.info=NREUM.info,e=p.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(t&&t.licenseKey&&t.applicationID&&e))return u.abort();f(y,function(e,n){t[e]||(t[e]=n)}),s("mark",["onload",a()+g.offset],null,"api");var n=p.createElement("script");n.src="https://"+t.agent,e.parentNode.insertBefore(n,e)}}function o(){"complete"===p.readyState&&i()}function i(){s("mark",["domContent",a()+g.offset],null,"api")}function a(){return E.exists&&performance.now?Math.round(performance.now()):(c=Math.max((new Date).getTime(),c))-g.offset}var c=(new Date).getTime(),s=t("handle"),f=t(19),u=t("ee"),d=window,p=d.document,h="addEventListener",l="attachEvent",m=d.XMLHttpRequest,v=m&&m.prototype;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:m,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var w=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-spa-1026.min.js"},b=m&&v&&v[h]&&!/CriOS/.test(navigator.userAgent),g=e.exports={offset:c,now:a,origin:w,features:{},xhrWrappable:b};t(16),p[h]?(p[h]("DOMContentLoaded",i,!1),d[h]("load",r,!1)):(p[l]("onreadystatechange",o),d[l]("onload",r)),s("mark",["firstbyte",c],null,"api");var x=0,E=t(21)},{}]},{},["loader",2,14,5,3,4]);</script><link rel="apple-touch-icon" href="https://www.safaribooksonline.com/static/images/apple-touch-icon.8cc2fd27400e.png"><link rel="shortcut icon" href="https://www.safaribooksonline.com/favicon.ico" type="image/x-icon"><link href="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/css" rel="stylesheet" type="text/css"><title>CHAPTER 12: Debugging and Deploying Your Application - Node.js Recipes: A Problem-Solution Approach</title><link rel="stylesheet" href="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/74741d96e0ae.css" type="text/css"><link rel="stylesheet" type="text/css" href="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/annotator.e34eec1a0d5a.css"><link rel="stylesheet" href="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/font-awesome.min.css"><style type="text/css" title="ibis-book">
    #sbo-rt-content div{margin:1em 1em 1em 1em}#sbo-rt-content a{text-decoration:none}#sbo-rt-content img{max-width:100%;margin-top:10pt}#sbo-rt-content p.booktitle{font-weight:bold;font-size:2.5em;margin-top:2em;margin-bottom:8em;text-align:center}#sbo-rt-content p.bookauthor{font-weight:bold;font-size:1.7em;margin-top:0;margin-right:2em;margin-bottom:0;text-align:left}#sbo-rt-content p.booksubtitle{font-weight:bold;font-size:1.7em;margin-top:0;margin-bottom:7em;text-align:center;color:#8A8A8A}#sbo-rt-content .bookimage{font-size:1.2em;margin-top:0;margin-bottom:1em;text-align:left}#sbo-rt-content .fmpara{font-size:.9em;text-indent:0;margin-top:.5em;margin-bottom:.3em;text-align:justify}#sbo-rt-content .fmpara1{font-size:.9em;text-indent:0;margin-top:.4em;margin-bottom:.3em;text-align:right}#sbo-rt-content .inpara{text-indent:0;margin-top:.4em;margin-left:3em;margin-bottom:.3em}#sbo-rt-content .pub{margin-top:10em;margin-bottom:1em;text-align:right;margin-right:5em}#sbo-rt-content .copyright{font-size:.9em;margin-top:.4em;margin-bottom:.4em;margin-left:1.2em;margin-right:1.2em;text-align:left}#sbo-rt-content .copyright1{font-size:.9em;margin-top:.1em;margin-bottom:.1em;margin-left:4em;margin-right:3.3em;text-align:left;text-indent:-1.6em}#sbo-rt-content .copyright2{font-size:.9em;margin-top:.1em;margin-bottom:.1em;margin-left:4.2em}#sbo-rt-content .dedication{font-size:1.2em;margin-bottom:0;margin-top:3.5em;text-align:center;margin-right:1em;font-style:italic}#sbo-rt-content .dedication1{font-size:1.2em;margin-bottom:0;margin-top:.5em;text-align:center;margin-right:1em;font-style:normal}#sbo-rt-content .dedication2{font-size:1.2em;margin-bottom:0;margin-top:1.5em;text-align:center;margin-right:1em;font-style:italic}#sbo-rt-content .content-title{font-size:1.6em;margin-top:3em;margin-bottom:.1em;text-align:left;font-weight:bold}#sbo-rt-content .fmtitle{font-size:2.5em;margin-top:1em;margin-bottom:1em;text-align:left;font-weight:bold;border-bottom:1.1px solid black;padding-bottom:.8em}#sbo-rt-content .right{text-indent:0;margin-top:1em;margin-right:1.5em;margin-bottom:.3em;text-align:right}#sbo-rt-content .right1{text-indent:0;margin-top:0;margin-right:1.5em;margin-bottom:.2em;text-align:right}#sbo-rt-content .chapimage{margin-left:.2em;margin-top:1.5em;margin-bottom:1.5em;text-align:left}#sbo-rt-content p.ChapterNumber{font-weight:bold;font-size:1.7em;margin-top:10px;margin-left:0;margin-bottom:5px;text-align:left}#sbo-rt-content p.ChapterTitle{font-weight:bold;font-size:2.5em;margin-top:0;margin-bottom:1em;margin-left:0;text-align:left;border-bottom:1.1px solid black;padding-bottom:.8em}#sbo-rt-content p.PartNumber{font-weight:bold;font-size:1.7em;margin-top:10px;margin-left:0;margin-bottom:5px;text-align:left;padding-bottom:.8em}#sbo-rt-content p.partTitle{font-weight:bold;font-size:2.5em;margin-top:1em;margin-bottom:1em;margin-left:0;text-align:left}#sbo-rt-content .paraaftertitle{font-size:100%;text-indent:0;margin-top:0;margin-left:0;margin-bottom:0}#sbo-rt-content p.noindent{font-size:100%;text-indent:0;margin-top:1em;margin-bottom:0;margin-left:0;margin-right:0;text-align:left}#sbo-rt-content p.noindent1{font-size:100%;text-indent:0;margin-top:1em;margin-bottom:1em}#sbo-rt-content p.noindent2{font-size:100%;text-indent:0;margin-top:1.5em;margin-bottom:1em}#sbo-rt-content p.noindent3{font-size:100%;text-indent:0;margin-top:.8em;margin-bottom:.2em;margin-left:0;margin-right:0;text-align:center}#sbo-rt-content p.noindent4{font-size:100%;text-indent:0;margin-top:.8em;margin-bottom:.2em;margin-left:0;margin-right:0;text-align:left}#sbo-rt-content span.listing{font-weight:bold}#sbo-rt-content p.indent{font-size:100%;text-indent:1.2em;margin-top:.1em;margin-bottom:.1em;margin-left:0;margin-right:0;text-align:left}#sbo-rt-content p.indent1{font-size:100%;text-indent:1.2em;margin-top:0;margin-bottom:0;margin-left:0;margin-right:0;text-align:left}#sbo-rt-content p.indent1a{font-size:100%;text-indent:1.5em;margin-top:0;margin-bottom:0;margin-left:0;margin-right:4.5em;text-align:right}#sbo-rt-content p.indent2{font-size:100%;margin-top:.8em;margin-bottom:.8em;margin-left:2.4em;margin-right:2.4em;text-align:justify;font-style:italic}#sbo-rt-content p.indent3{font-size:100%;text-indent:1em;margin-top:.8em;margin-bottom:.8em;margin-left:1.8em;margin-right:1.8em;text-align:left}#sbo-rt-content p.indent4{font-size:100%;text-indent:1.3em;margin-top:.5em;margin-bottom:.5em;margin-left:2em;margin-right:0;text-align:left}#sbo-rt-content .blockquote{font-size:100%;text-indent:.2em;margin-top:1em;margin-left:3em;margin-right:2em;margin-bottom:1em;font-style:italic}#sbo-rt-content .blockquote1{font-size:100%;text-indent:.2em;margin-top:1em;margin-left:3em;margin-bottom:0;font-style:italic}#sbo-rt-content p.Heading1{font-weight:bold;font-size:2em;text-indent:0;margin-top:1.3em;margin-bottom:.3em}#sbo-rt-content p.Heading2{font-size:1.6em;text-indent:0;margin-top:1.3em;margin-bottom:.3em}#sbo-rt-content p.Heading2_2{font-size:1.6em;text-indent:0;margin-top:.3em;margin-bottom:.3em}#sbo-rt-content p.Heading2a{font-size:1.5em;text-indent:0;margin-top:1.3em;margin-bottom:.3em;font-weight:bold}#sbo-rt-content p.Heading3{font-weight:bold;font-size:1.45em;text-indent:0;margin-top:1.2em;margin-bottom:.1em}#sbo-rt-content p.Heading3a{font-weight:normal;font-size:1.25em;text-indent:0;margin-top:1.2em;margin-bottom:.1em}#sbo-rt-content p.Heading4{font-size:1.3em;text-indent:0;margin-top:1.3em;margin-bottom:.3em;text-align:left}#sbo-rt-content .img{max-width:100%;margin-top:10pt}#sbo-rt-content .img1{text-align:left}#sbo-rt-content .img1a{text-align:right;margin-right:5em;margin-top:5em}#sbo-rt-content .img2{text-align:left}#sbo-rt-content div.Figure{font-size:small;margin-top:1.5em;margin-bottom:1.5em}#sbo-rt-content .para-1{font-size:100%;margin-top:1em;text-indent:1.5em;margin-bottom:0;text-align:left}#sbo-rt-content .para-2{font-size:.9em;text-indent:-1.4em;margin-left:2.4em;margin-top:.5em;margin-bottom:0}#sbo-rt-content .figurecaption{font-size:small;margin-top:0;margin-bottom:0;text-align:justify}#sbo-rt-content .image{text-align:center}#sbo-rt-content .codecaption{font-size:100%;margin-top:.6em;margin-bottom:.6em;text-align:justify;font-style:italic}#sbo-rt-content .PCode{font-size:small;margin-top:1em;margin-bottom:1em;margin-left:0;text-align:left;font-family:monospace}#sbo-rt-content .PCode-1{font-size:small;margin-top:1em;margin-bottom:.1em;margin-left:0;text-align:left;font-family:monospace}#sbo-rt-content .PCode-2{font-size:small;margin-top:0;margin-bottom:0;margin-left:0;text-align:left;font-family:monospace}#sbo-rt-content .PCode-3{font-size:small;margin-top:0;margin-bottom:1em;margin-left:0;text-align:left;font-family:monospace}#sbo-rt-content div.singlethin{border-bottom:solid 3px;margin-left:1em;margin-right:1em;margin-bottom:1em}#sbo-rt-content div.singlethin1{margin-left:2em;margin-right:2em}#sbo-rt-content .inlinecode{font-family:monospace}#sbo-rt-content div.notepara{font-size:110%;text-indent:0;margin-top:1em;border-top:solid 1px;border-bottom:solid 1px;margin-bottom:1em;text-align:justify}#sbo-rt-content span.pink-box{font-weight:bold;padding-left:1.3em;padding-right:1.3em;border:1.1px solid black;font-size:1.5em;margin-top:.5em;margin-bottom:.5em;text-indent:0;text-align:justify}#sbo-rt-content span.courier{font-family:Courier New;font-weight:normal;font-style:normal;font-size:100%}#sbo-rt-content div.courier{font-family:Courier New;font-weight:normal;font-style:normal;font-size:100%;margin-top:1em;margin-bottom:1em}#sbo-rt-content div.boxcourier{font-family:Courier New;font-weight:normal;font-style:normal;font-size:100%;margin-top:1em;margin-bottom:1em;margin-left:1.5em;margin-right:1.5em;text-align:left}#sbo-rt-content span.courier1{font-family:Courier New;font-weight:normal;font-style:normal;font-size:95%}#sbo-rt-content .boxhead{font-size:1.25em;font-weight:bold;padding-left:.1em;padding-bottom:.1em;padding-top:.1em;margin-top:0;text-indent:0;text-align:center;border:3px solid black}#sbo-rt-content div.box{margin-top:1em;margin-bottom:1em}#sbo-rt-content .boxpara{font-size:110%;text-indent:0;margin-left:1.5em;margin-right:1.5em;margin-top:.5em;margin-bottom:.5em;text-align:left}#sbo-rt-content .alpha{font-size:1.2em;font-weight:bold;margin-left:.2em;margin-top:1em;margin-bottom:.3em;text-align:left}#sbo-rt-content .index{font-size:small;margin-left:.2em;margin-top:0;margin-bottom:0;text-align:left}#sbo-rt-content .index1{font-size:small;margin-left:1em;margin-top:0;margin-bottom:0;text-align:left}#sbo-rt-content .index2{font-size:small;margin-left:2em;margin-top:0;margin-bottom:0;text-align:left}#sbo-rt-content .cover{text-align:center}#sbo-rt-content .top{border-top:1.1px solid black;border-bottom:2px solid black}#sbo-rt-content .bot{border-bottom:2px solid black}#sbo-rt-content table.bodytable,#sbo-rt-content table{border-collapse:collapse;margin-bottom:8px;font-size:small;margin-top:10pt;width:95%;border-top:0 solid black;border-bottom:0 solid black}#sbo-rt-content table.fmtable{margin-bottom:1em;font-size:1em;margin-left:4em;border-top:0 solid #FFF;border-bottom:0 solid #FFF}#sbo-rt-content table{margin-bottom:1em;border-top:1.1px solid black;border-bottom:1.1px solid black;border-collapse:collapse}#sbo-rt-content th{border-top:1px solid black;border-bottom:1px solid black;padding-right:1.5em}#sbo-rt-content td{font-size:small;vertical-align:top;padding-right:1.5em;margin-top:0;margin-bottom:1em}#sbo-rt-content .tablepara{font-size:small;text-indent:0;margin-top:0;margin-bottom:.5em;padding-right:1.5em}#sbo-rt-content .tablepara1{font-size:small;margin-left:2em;margin-top:0;margin-bottom:0;padding-right:1.5em}#sbo-rt-content .header{border-bottom:1.1px solid black;text-indent:0;text-align:left}#sbo-rt-content .TabCapt{font-style:italic;margin-left:0;text-indent:0}#sbo-rt-content .FigCapt{font-style:italic;font-size:.9em}#sbo-rt-content .CaptNr{font-weight:bold}#sbo-rt-content .ttitle{font-style:Italic;margin-bottom:1em}#sbo-rt-content p.paraaftertitle1{font-size:.9em;text-indent:0;margin-top:.5em;margin-bottom:.8em;text-align:left}#sbo-rt-content p.para{font-size:small;text-indent:20px;margin-top:0;margin-bottom:0;text-align:justify}#sbo-rt-content p.quote{font-style:italic;font-size:100%;margin-top:1.5em;margin-left:2.5em;margin-right:2.5em;margin-bottom:0}#sbo-rt-content p.quotesource{font-size:small;text-indent:0;margin-top:1em;margin-bottom:1em;text-align:right}#sbo-rt-content p.chaptersubtitle{font-size:x-large;text-indent:0;margin-top:0;margin-left:0;margin-bottom:0;text-align:left}#sbo-rt-content p.line{margin-top:.3em;border-bottom:1px solid black}#sbo-rt-content p.line1{margin-top:.3em;margin-bottom:1.5em;border-bottom:1px solid black}#sbo-rt-content p.line2{margin-top:5em;margin-bottom:5em;border-bottom:1px solid black;text-align:center;margin-left:15em;margin-right:15em}#sbo-rt-content li{margin-bottom:.5em;margin-top:.5em}#sbo-rt-content p.alpha{font-size:1.2em;font-weight:bold;margin-left:.2em;margin-top:1em;margin-bottom:.3em;text-align:left}#sbo-rt-content ul.bulleted{font-size:100%;text-align:justify;margin-left:2.5em;margin-right:3em;margin-top:1em;margin-bottom:1em;text-indent:0}#sbo-rt-content ol.OrderedList{font-size:100%;text-align:left;margin-left:2.5em;margin-right:3em;margin-top:1em;margin-bottom:1em}#sbo-rt-content ul.bulleted1{font-size:100%;text-align:left;margin-left:1em;margin-right:5em;margin-top:1em;margin-bottom:1em;list-style-type:none}#sbo-rt-content ul.bulleted1_a{font-size:100%;text-align:justify;margin-left:0;margin-right:5em;margin-top:1em;margin-bottom:1em;text-indent:0;list-style-type:none}#sbo-rt-content ul.bulleted2{font-size:100%;text-align:justify;margin-left:2.3em;margin-right:5em;margin-top:1em;margin-bottom:1em;text-indent:0}#sbo-rt-content ul.bulleted4{font-size:100%;text-align:center;margin-left:1.3em;margin-right:5em;margin-top:1em;margin-bottom:1em;text-indent:0;list-style-type:none}#sbo-rt-content .numbered{font-size:small;text-align:justify;margin-left:2em;margin-right:2em;margin-top:.5em;margin-bottom:.5em;text-indent:1em}#sbo-rt-content .bulletedin{font-size:100%;text-align:justify;margin-left:4em;margin-right:4em;margin-top:.5em;margin-bottom:.5em}#sbo-rt-content ul.None{font-size:.9em;text-align:justify;margin-left:3em;margin-right:2em;margin-top:.5em;margin-bottom:.5em;list-style-type:none}#sbo-rt-content .Listing{font-size:small;margin-bottom:0}#sbo-rt-content .PCode1{font-size:small;margin-top:.7em;margin-bottom:0;text-align:left;font-family:monospace}#sbo-rt-content .PCode2{font-size:small;margin-top:1em;margin-bottom:.1em;margin-left:2.2em;text-align:left;font-family:monospace}#sbo-rt-content .PCode3{font-size:small;margin-top:0;margin-left:2.2em;margin-bottom:.1em;text-align:left;font-family:monospace}#sbo-rt-content .NoteCaption{font-size:small;margin-top:1.3em;margin-left:5em;margin-right:5em;border:1.1px solid black;padding:.5em;margin-bottom:1.3em}#sbo-rt-content .Table{font-size:100%;margin-bottom:1em;margin-left:0}#sbo-rt-content .toc{font-size:1.1em;margin-top:.2em;margin-bottom:.2em;text-align:left;font-weight:bold}#sbo-rt-content .toca{font-size:1.1em;margin-top:.8em;margin-bottom:.4em;text-align:left;font-weight:bold}#sbo-rt-content .toc1{font-size:1.1em;margin-top:.4em;margin-bottom:.3em;text-align:left;text-indent:1.4em;font-weight:normal}#sbo-rt-content .toc2{font-size:1.2em;margin-top:.4em;margin-bottom:.3em;text-align:left;font-weight:bold}#sbo-rt-content .toc3{font-size:.9em;margin-top:.4em;margin-bottom:.3em;text-align:left;text-indent:3.5em;font-weight:normal}#sbo-rt-content .toc4{font-size:1.1em;margin-top:.2em;margin-bottom:.5em;text-align:left;font-weight:bold}#sbo-rt-content .tocch{font-size:1.3em;margin-top:.7em;margin-bottom:.7em;text-align:left;font-weight:bold}#sbo-rt-content .noborder{margin-bottom:1em;border-top:0 solid #FFF;border-bottom:0 solid #FFF}#sbo-rt-content .authurright{text-align:right;margin-top:0;margin-bottom:0}#sbo-rt-content .FormalPara{font-size:small;margin-bottom:.7em}#sbo-rt-content .FontName1{font-size:100%;font-family:"Courier New",Courier,monospace}#sbo-rt-content span.FontName2{font-size:100%;font-family:"Courier New",Courier,monospace}#sbo-rt-content span.FontName3{font-size:100%;font-family:"Courier New",Courier,monospace}#sbo-rt-content .rightarrow{margin-top:0}#sbo-rt-content div.thinline{margin-top:1em;margin-bottom:1em;border-top:solid 4px #AFAFB0;border-bottom:solid 4px #AFAFB0}#sbo-rt-content span.line{text-decoration:underline}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content div.box{border-top:solid 2px;border-bottom:solid 2px}#sbo-rt-content .app{font-size:150%;margin-left:.8em}#sbo-rt-content .page{text-decoration:none;color:#000}#sbo-rt-content .cXXX{text-decoration:none;color:#000}#sbo-rt-content .textindent{margin-left:1.7em;margin-top:1em;margin-bottom:1em;font-size:100%}#sbo-rt-content .textindent1{margin-left:1.7em;margin-top:0;margin-bottom:0;font-size:100%}#sbo-rt-content .textindent2{margin-left:1.7em;margin-top:0;margin-bottom:0;font-size:100%;text-indent:1em}#sbo-rt-content p.FootNote{margin-top:.8em;margin-bottom:0;font-size:85%;text-indent:0;text-align:left;margin-left:1.1em;margin-right:1.1em}#sbo-rt-content pre{margin-left:0;font-family:monospace;white-space:pre-wrap}#sbo-rt-content p.Heading4a{font-size:1.15em;font-weight:bold;text-indent:1em;margin-top:1.3em;margin-bottom:.3em;border-top:3px solid #4d4d4c;border-left:solid 3px #4d4d4c;border-right:solid 3px #4d4d4c;border-bottom:solid 3px #4d4d4c;text-align:center}#sbo-rt-content p.noindent8{font-size:100%;text-indent:0;margin-top:1em;margin-bottom:1em;text-align:center;font-weight:bold;color:#8A8A8A}#sbo-rt-content .tocb{font-size:1.4em;margin-top:.5em;margin-bottom:.2em;text-align:left;font-weight:bold}#sbo-rt-content .part{font-weight:normal;font-size:1em;margin-bottom:5px;text-align:left;padding-left:1.3em;padding-bottom:10em;padding-right:1.3em;border:1.1px solid black}#sbo-rt-content p.Heading5{font-size:1em;text-indent:0;margin-top:1.3em;margin-bottom:.3em;text-align:center}#sbo-rt-content p.noindent5s{font-size:100%;text-indent:0;margin-top:.1em;margin-bottom:.1em;margin-left:0;margin-right:0;text-align:right}#sbo-rt-content span.strike{text-decoration:line-through}
    </style><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/9781430260585/chapter/9781430260585_Ch12.xhtml",
          "book_id": "9781430260585",
          "chapter_uri": "9781430260585_Ch12.xhtml",
          "position": 0,
          "user_uuid": "29525685-85c9-45c7-9eda-3c178d86398e",
          "next_chapter_uri": "/library/view/nodejs-recipes-a/9781430260585/9781430260585_Index.xhtml"
        
      },
      title: "Node.js Recipes: A Problem\u002DSolution Approach",
      author_list: "Cory Gackenheimer",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: false,
      show_ios_app_teaser: false
    };
    // ]]></script><script src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/modernizr.js"></script><script>
    
      
        

        

        
          
            window.PUBLIC_ANNOTATIONS = true;
          
        

      

      
        window.MOBILE_PUBLIC_ANNOTATIONS = false;
      

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

    
      window.PRIVACY_CONTROL_SWITCH = true;
    

    
      window.PUBLISHER_PAGES = true;
    

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "https://www.safaribooksonline.com/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "https://www.safaribooksonline.com/api/v2/search/select/",
          "ENABLE_ONLINE_TRAINING": true
        }
      };
  </script><link rel="canonical" href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml"><meta name="description" content="CHAPTER 12 Debugging and Deploying Your Application In this book you have seen a great deal of what you are capable of producing with Node.js. You have created an ... "><meta property="og:title" content="CHAPTER 12: Debugging and Deploying Your Application"><meta itemprop="isPartOf" content="/library/view/nodejs-recipes-a/9781430260585/"><meta itemprop="name" content="CHAPTER 12: Debugging and Deploying Your Application"><meta property="og:url" itemprop="url" content="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://www.safaribooksonline.com/library/cover/9781430260585/"><meta property="og:description" itemprop="description" content="CHAPTER 12 Debugging and Deploying Your Application In this book you have seen a great deal of what you are capable of producing with Node.js. You have created an ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="Apress"><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781430260585"><meta property="og:book:author" itemprop="author" content="Cory Gackenheimer"><meta property="og:book:tag" itemprop="about" content="JavaScript"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: &lt;%= font_size %&gt; !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: &lt;%= font_family %&gt; !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: &lt;%= column_width %&gt;% !important; margin: 0 auto !important; }"></style><noscript>&lt;meta http-equiv="refresh" content="0; url=/library/no-js/" /&gt;</noscript><script type="text/javascript">
  (function(i,s,o,g,r,a,m) {
    i['GoogleAnalyticsObject']=r;
    i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();
    a=s.createElement(o),m=s.getElementsByTagName(o)[0];
    a.async=1;
    a.src=g;
    m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  var matches = document.cookie.match(/BrowserCookie\s*=\s*([a-f0-9\-]{36})/),
      user_uuid = null;

  if (matches && matches.length === 2) {
    user_uuid = matches[1];
  }


  ga('create', 'UA-39299553-7', {'userId': '29525685-85c9-45c7-9eda-3c178d86398e' });


ga('set', 'dimension1', 'Trial');
ga('set', 'dimension6', user_uuid);


  ga('set', 'dimension2', '29525685-85c9-45c7-9eda-3c178d86398e');
  






  //enable enhanced link tracking
  ga('require', 'linkid', 'linkid.js');

  // reading interface will track pageviews itself
  if (document.location.pathname.indexOf("/library/view") !== 0) {
    ga('send', 'pageview');
  }
</script><script defer="" src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/vendor.34024413b1d4.js"></script><script defer="" src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/reader.a05323b190d3.js"></script><script async="" src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/MathJax.js"></script><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style></head>


<body class="reading sidenav nav-collapsed  scalefonts subscribe-panel library">

    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        





<a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li class="t-logo"><a href="https://www.safaribooksonline.com/home/" class="l0 None safari-home nav-icn js-keyboard-nav-home"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>Safari Home Icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 9.9L4 9.9 4 18 16 18 16 9.9 10 4 4 9.9ZM2.6 8.1L2.6 8.1 8.7 1.9 10 0.5 11.3 1.9 17.4 8.1 18 8.7 18 9.5 18 18.1 18 20 16.1 20 3.9 20 2 20 2 18.1 2 9.5 2 8.7 2.6 8.1Z"></path><rect x="10" y="12" width="3" height="7"></rect><rect transform="translate(18.121320, 10.121320) rotate(-315.000000) translate(-18.121320, -10.121320) " x="16.1" y="9.1" width="4" height="2"></rect><rect transform="translate(2.121320, 10.121320) scale(-1, 1) rotate(-315.000000) translate(-2.121320, -10.121320) " x="0.1" y="9.1" width="4" height="2"></rect></g></svg><span>Safari Home</span></a></li><li><a href="https://www.safaribooksonline.com/r/" class="t-recommendations-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>recommendations icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M50 25C50 18.2 44.9 12.5 38.3 11.7 37.5 5.1 31.8 0 25 0 18.2 0 12.5 5.1 11.7 11.7 5.1 12.5 0 18.2 0 25 0 31.8 5.1 37.5 11.7 38.3 12.5 44.9 18.2 50 25 50 31.8 50 37.5 44.9 38.3 38.3 44.9 37.5 50 31.8 50 25ZM25 3.1C29.7 3.1 33.6 6.9 34.4 11.8 30.4 12.4 26.9 15.1 25 18.8 23.1 15.1 19.6 12.4 15.6 11.8 16.4 6.9 20.3 3.1 25 3.1ZM34.4 15.6C33.6 19.3 30.7 22.2 27.1 22.9 27.8 19.2 30.7 16.3 34.4 15.6ZM22.9 22.9C19.2 22.2 16.3 19.3 15.6 15.6 19.3 16.3 22.2 19.2 22.9 22.9ZM3.1 25C3.1 20.3 6.9 16.4 11.8 15.6 12.4 19.6 15.1 23.1 18.8 25 15.1 26.9 12.4 30.4 11.8 34.4 6.9 33.6 3.1 29.7 3.1 25ZM22.9 27.1C22.2 30.7 19.3 33.6 15.6 34.4 16.3 30.7 19.2 27.8 22.9 27.1ZM25 46.9C20.3 46.9 16.4 43.1 15.6 38.2 19.6 37.6 23.1 34.9 25 31.3 26.9 34.9 30.4 37.6 34.4 38.2 33.6 43.1 29.7 46.9 25 46.9ZM27.1 27.1C30.7 27.8 33.6 30.7 34.4 34.4 30.7 33.6 27.8 30.7 27.1 27.1ZM38.2 34.4C37.6 30.4 34.9 26.9 31.3 25 34.9 23.1 37.6 19.6 38.2 15.6 43.1 16.4 46.9 20.3 46.9 25 46.9 29.7 43.1 33.6 38.2 34.4Z"></path></g></svg><span>Recommended</span></a></li><li><a href="https://www.safaribooksonline.com/s/" class="t-queue-nav l0 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z"></path></g></svg><span>
              
                Queue
              
            </span></a></li><li class="search"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li><a href="https://www.safaribooksonline.com/history/" class="t-recent-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>recent items icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 0C11.2 0 0 11.2 0 25 0 38.8 11.2 50 25 50 38.8 50 50 38.8 50 25 50 11.2 38.8 0 25 0ZM6.3 25C6.3 14.6 14.6 6.3 25 6.3 35.4 6.3 43.8 14.6 43.8 25 43.8 35.4 35.4 43.8 25 43.8 14.6 43.8 6.3 35.4 6.3 25ZM31.8 31.5C32.5 30.5 32.4 29.2 31.6 28.3L27.1 23.8 27.1 12.8C27.1 11.5 26.2 10.4 25 10.4 23.9 10.4 22.9 11.5 22.9 12.8L22.9 25.7 28.8 31.7C29.2 32.1 29.7 32.3 30.2 32.3 30.8 32.3 31.3 32 31.8 31.5Z"></path></g></svg><span>History</span></a></li><li><a href="https://www.safaribooksonline.com/topics" class="t-topics-link l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 55" width="20" height="20" version="1.1" fill="#4A3C31"><desc>topics icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 55L50 41.262 50 13.762 25 0 0 13.762 0 41.262 25 55ZM8.333 37.032L8.333 17.968 25 8.462 41.667 17.968 41.667 37.032 25 46.538 8.333 37.032Z"></path></g></svg><span>Topics</span></a></li><li><a href="https://www.safaribooksonline.com/tutorials/" class="l1 nav-icn t-tutorials-nav js-toggle-menu-item None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>tutorials icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.8 18.2C15.8 18.2 15.9 18.2 16 18.2 16.1 18.2 16.2 18.2 16.4 18.2 16.5 18.2 16.7 18.1 16.9 18 17 17.9 17.1 17.8 17.2 17.7 17.3 17.6 17.4 17.5 17.4 17.4 17.5 17.2 17.6 16.9 17.6 16.7 17.6 16.6 17.6 16.5 17.6 16.4 17.5 16.2 17.5 16.1 17.4 15.9 17.3 15.8 17.2 15.6 17 15.5 16.8 15.3 16.6 15.3 16.4 15.2 16.2 15.2 16 15.2 15.8 15.2 15.7 15.2 15.5 15.3 15.3 15.4 15.2 15.4 15.1 15.5 15 15.7 14.9 15.8 14.8 15.9 14.7 16 14.7 16.1 14.6 16.3 14.6 16.4 14.6 16.5 14.6 16.6 14.6 16.6 14.6 16.7 14.6 16.9 14.6 17 14.6 17.1 14.7 17.3 14.7 17.4 14.8 17.6 15 17.7 15.1 17.9 15.2 18 15.3 18 15.5 18.1 15.5 18.1 15.6 18.2 15.7 18.2 15.7 18.2 15.7 18.2 15.8 18.2L15.8 18.2ZM9.4 11.5C9.5 11.5 9.5 11.5 9.6 11.5 9.7 11.5 9.9 11.5 10 11.5 10.2 11.5 10.3 11.4 10.5 11.3 10.6 11.2 10.8 11.1 10.9 11 10.9 10.9 11 10.8 11.1 10.7 11.2 10.5 11.2 10.2 11.2 10 11.2 9.9 11.2 9.8 11.2 9.7 11.2 9.5 11.1 9.4 11 9.2 10.9 9.1 10.8 8.9 10.6 8.8 10.5 8.7 10.3 8.6 10 8.5 9.9 8.5 9.7 8.5 9.5 8.5 9.3 8.5 9.1 8.6 9 8.7 8.8 8.7 8.7 8.8 8.6 9 8.5 9.1 8.4 9.2 8.4 9.3 8.2 9.5 8.2 9.8 8.2 10 8.2 10.1 8.2 10.2 8.2 10.3 8.2 10.5 8.3 10.6 8.4 10.7 8.5 10.9 8.6 11.1 8.7 11.2 8.9 11.3 9 11.4 9.1 11.4 9.2 11.4 9.3 11.5 9.3 11.5 9.3 11.5 9.4 11.5 9.4 11.5L9.4 11.5ZM3 4.8C3.1 4.8 3.1 4.8 3.2 4.8 3.4 4.8 3.5 4.8 3.7 4.8 3.8 4.8 4 4.7 4.1 4.6 4.3 4.5 4.4 4.4 4.5 4.3 4.6 4.2 4.6 4.1 4.7 4 4.8 3.8 4.8 3.5 4.8 3.3 4.8 3.1 4.8 3 4.8 2.9 4.7 2.8 4.7 2.6 4.6 2.5 4.5 2.3 4.4 2.2 4.2 2.1 4 1.9 3.8 1.9 3.6 1.8 3.5 1.8 3.3 1.8 3.1 1.8 2.9 1.8 2.7 1.9 2.6 2 2.4 2.1 2.3 2.2 2.2 2.3 2.1 2.4 2 2.5 2 2.6 1.8 2.8 1.8 3 1.8 3.3 1.8 3.4 1.8 3.5 1.8 3.6 1.8 3.8 1.9 3.9 2 4 2.1 4.2 2.2 4.4 2.4 4.5 2.5 4.6 2.6 4.7 2.7 4.7 2.8 4.7 2.9 4.8 2.9 4.8 3 4.8 3 4.8 3 4.8L3 4.8ZM13.1 15.2C13.2 15.1 13.2 15.1 13.2 15.1 13.3 14.9 13.4 14.7 13.6 14.5 13.8 14.2 14.1 14 14.4 13.8 14.7 13.6 15.1 13.5 15.5 13.4 15.9 13.4 16.3 13.4 16.7 13.5 17.2 13.5 17.6 13.7 17.9 13.9 18.2 14.1 18.5 14.4 18.7 14.7 18.9 15 19.1 15.3 19.2 15.6 19.3 15.9 19.4 16.1 19.4 16.4 19.4 17 19.3 17.5 19.1 18.1 19 18.3 18.9 18.5 18.7 18.7 18.5 19 18.3 19.2 18 19.4 17.7 19.6 17.3 19.8 16.9 19.9 16.6 20 16.3 20 16 20 15.8 20 15.6 20 15.4 19.9 15.4 19.9 15.4 19.9 15.4 19.9 15.2 19.9 15 19.8 14.9 19.8 14.8 19.7 14.7 19.7 14.6 19.7 14.4 19.6 14.3 19.5 14.1 19.3 13.7 19.1 13.4 18.7 13.2 18.4 13.1 18.1 12.9 17.8 12.9 17.5 12.8 17.3 12.8 17.1 12.8 16.9L3.5 14.9C3.3 14.9 3.1 14.8 3 14.8 2.7 14.7 2.4 14.5 2.1 14.3 1.7 14 1.4 13.7 1.2 13.3 1 13 0.9 12.6 0.8 12.3 0.7 12 0.7 11.7 0.7 11.4 0.7 11 0.8 10.5 1 10.1 1.1 9.8 1.3 9.5 1.6 9.2 1.8 8.9 2.1 8.7 2.4 8.5 2.8 8.3 3.2 8.1 3.6 8.1 3.9 8 4.2 8 4.5 8 4.6 8 4.8 8 4.9 8.1L6.8 8.5C6.8 8.4 6.8 8.4 6.8 8.4 6.9 8.2 7.1 8 7.2 7.8 7.5 7.5 7.7 7.3 8 7.1 8.4 6.9 8.7 6.8 9.1 6.7 9.5 6.7 10 6.7 10.4 6.8 10.8 6.8 11.2 7 11.5 7.2 11.8 7.5 12.1 7.7 12.4 8 12.6 8.3 12.7 8.6 12.8 8.9 12.9 9.2 13 9.4 13 9.7 13 9.7 13 9.8 13 9.8 13.6 9.9 14.2 10.1 14.9 10.2 15 10.2 15 10.2 15.1 10.2 15.3 10.2 15.4 10.2 15.6 10.2 15.8 10.1 16 10 16.2 9.9 16.4 9.8 16.5 9.6 16.6 9.5 16.8 9.2 16.9 8.8 16.9 8.5 16.9 8.3 16.9 8.2 16.8 8 16.8 7.8 16.7 7.7 16.6 7.5 16.5 7.3 16.3 7.2 16.2 7.1 16 7 15.9 6.9 15.8 6.9 15.7 6.9 15.6 6.8 15.5 6.8L6.2 4.8C6.2 5 6 5.2 5.9 5.3 5.7 5.6 5.5 5.8 5.3 6 4.9 6.2 4.5 6.4 4.1 6.5 3.8 6.6 3.5 6.6 3.2 6.6 3 6.6 2.8 6.6 2.7 6.6 2.6 6.6 2.6 6.5 2.6 6.5 2.5 6.5 2.3 6.5 2.1 6.4 1.8 6.3 1.6 6.1 1.3 6 1 5.7 0.7 5.4 0.5 5 0.3 4.7 0.2 4.4 0.1 4.1 0 3.8 0 3.6 0 3.3 0 2.8 0.1 2.2 0.4 1.7 0.5 1.5 0.7 1.3 0.8 1.1 1.1 0.8 1.3 0.6 1.6 0.5 2 0.3 2.3 0.1 2.7 0.1 3.1 0 3.6 0 4 0.1 4.4 0.2 4.8 0.3 5.1 0.5 5.5 0.8 5.7 1 6 1.3 6.2 1.6 6.3 1.9 6.4 2.3 6.5 2.5 6.6 2.7 6.6 3 6.6 3 6.6 3.1 6.6 3.1 9.7 3.8 12.8 4.4 15.9 5.1 16.1 5.1 16.2 5.2 16.4 5.2 16.7 5.3 16.9 5.5 17.2 5.6 17.5 5.9 17.8 6.2 18.1 6.5 18.3 6.8 18.4 7.2 18.6 7.5 18.6 7.9 18.7 8.2 18.7 8.6 18.7 9 18.6 9.4 18.4 9.8 18.3 10.1 18.2 10.3 18 10.6 17.8 10.9 17.5 11.1 17.3 11.3 16.9 11.6 16.5 11.8 16 11.9 15.7 12 15.3 12 15 12 14.8 12 14.7 12 14.5 11.9 13.9 11.8 13.3 11.7 12.6 11.5 12.5 11.7 12.4 11.9 12.3 12 12.1 12.3 11.9 12.5 11.7 12.7 11.3 12.9 10.9 13.1 10.5 13.2 10.2 13.3 9.9 13.3 9.6 13.3 9.4 13.3 9.2 13.3 9 13.2 9 13.2 9 13.2 9 13.2 8.8 13.2 8.7 13.2 8.5 13.1 8.2 13 8 12.8 7.7 12.6 7.4 12.4 7.1 12 6.8 11.7 6.7 11.4 6.6 11.1 6.5 10.8 6.4 10.6 6.4 10.4 6.4 10.2 5.8 10.1 5.2 9.9 4.5 9.8 4.4 9.8 4.4 9.8 4.3 9.8 4.1 9.8 4 9.8 3.8 9.8 3.6 9.9 3.4 10 3.2 10.1 3 10.2 2.9 10.4 2.8 10.5 2.6 10.8 2.5 11.1 2.5 11.5 2.5 11.6 2.5 11.8 2.6 12 2.6 12.1 2.7 12.3 2.8 12.5 2.9 12.6 3.1 12.8 3.2 12.9 3.3 13 3.5 13.1 3.6 13.1 3.7 13.1 3.8 13.2 3.9 13.2L13.1 15.2 13.1 15.2Z"></path></g></svg><span>Tutorials</span></a></li><li class="nav-offers flyout-parent"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#" class="l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>offers icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M35.9 20.6L27 15.5C26.1 15 24.7 15 23.7 15.5L14.9 20.6C13.9 21.1 13.2 22.4 13.2 23.4L13.2 41.4C13.2 42.4 13.9 43.7 14.9 44.2L23.3 49C24.2 49.5 25.6 49.5 26.6 49L35.9 43.6C36.8 43.1 37.6 41.8 37.6 40.8L37.6 23.4C37.6 22.4 36.8 21.1 35.9 20.6L35.9 20.6ZM40 8.2C39.1 7.6 37.6 7.6 36.7 8.2L30.2 11.9C29.3 12.4 29.3 13.2 30.2 13.8L39.1 18.8C40 19.4 40.7 20.6 40.7 21.7L40.7 39C40.7 40.1 41.4 40.5 42.4 40L48.2 36.6C49.1 36.1 49.8 34.9 49.8 33.8L49.8 15.6C49.8 14.6 49.1 13.3 48.2 12.8L40 8.2 40 8.2ZM27 10.1L33.6 6.4C34.5 5.9 34.5 5 33.6 4.5L26.6 0.5C25.6 0 24.2 0 23.3 0.5L16.7 4.2C15.8 4.7 15.8 5.6 16.7 6.1L23.7 10.1C24.7 10.6 26.1 10.6 27 10.1ZM10.1 21.7C10.1 20.6 10.8 19.4 11.7 18.8L20.6 13.8C21.5 13.2 21.5 12.4 20.6 11.9L13.6 7.9C12.7 7.4 11.2 7.4 10.3 7.9L1.6 12.8C0.7 13.3 0 14.6 0 15.6L0 33.8C0 34.9 0.7 36.1 1.6 36.6L8.4 40.5C9.3 41 10.1 40.6 10.1 39.6L10.1 21.7 10.1 21.7Z"></path></g></svg><span>Offers &amp; Deals</span></a><ul class="flyout"><li><a href="https://www.safaribooksonline.com/oreilly-newsletters/" class="l2 nav-icn"><span>Newsletters</span></a></li></ul></li><li class="nav-highlights"><a href="https://www.safaribooksonline.com/u/001o00000169U9HAAU/" class="t-highlights-nav l1 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 35" width="20" height="20" version="1.1" fill="#4A3C31"><desc>highlights icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.325 18.071L8.036 18.071C8.036 11.335 12.36 7.146 22.5 5.594L22.5 0C6.37 1.113 0 10.632 0 22.113 0 29.406 3.477 35 10.403 35 15.545 35 19.578 31.485 19.578 26.184 19.578 21.556 17.211 18.891 13.325 18.071L13.325 18.071ZM40.825 18.071L35.565 18.071C35.565 11.335 39.86 7.146 50 5.594L50 0C33.899 1.113 27.5 10.632 27.5 22.113 27.5 29.406 30.977 35 37.932 35 43.045 35 47.078 31.485 47.078 26.184 47.078 21.556 44.74 18.891 40.825 18.071L40.825 18.071Z"></path></g></svg><span>Highlights</span></a></li><li><a href="https://www.safaribooksonline.com/u/" class="t-settings-nav l1 js-settings nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"></path></g></svg><span>Settings</span></a></li><li><a href="https://www.safaribooksonline.com/public/support" class="l1 no-icon">Support</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l1 no-icon">Sign Out</a></li></ul><ul class="profile"><li><a href="https://www.safaribooksonline.com/u/" class="l2 nav-icn None"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"></path></g></svg><span>Settings</span></a><span class="l2 t-nag-notification" id="nav-nag"><strong class="trial-green">10</strong> days left in your trial.
  
  

  
    
      

<a class="" href="https://www.safaribooksonline.com/subscribe/">Subscribe</a>.


    
  

  

</span></li><li><a href="https://www.safaribooksonline.com/public/support" class="l2">Support</a></li><li><a href="https://www.safaribooksonline.com/accounts/logout/" class="l2">Sign Out</a></li></ul></div></li></ul></nav></header>


      </div>
      <div id="container" class="application" style="height: auto;">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Node.js Recipes: A Problem-Solution Approach
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#" title="Search in archive" class="js-search-controls search-controls"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781430260585/chapter/9781430260585_Ch12.xhtml" data-for-analytics="9781430260585:9781430260585_Ch12.xhtml" aria-label="Add to Queue"><span>Add to Queue</span></button></li><li class="js-font-control-panel font-control-activator"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#" class="trigger" data-push-state="false" title="Share" aria-label="Share"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml&amp;text=Node.js%20Recipes%3A%20A%20Problem-Solution%20Approach&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%20CHAPTER%2012%3A%20Debugging%20and%20Deploying%20Your%20Application&amp;body=https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml%0D%0Afrom%20Node.js%20Recipes%3A%20A%20Problem-Solution%20Approach%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    <section role="document">
        
        



 <!--[if lt IE 9]>
  
<![endif]-->



  <script defer="" src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/djangoMessagesPage.845b17d78025.js"></script>


        
	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch11.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">CHAPTER 11: Testing in Node.js</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Index.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">Index</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content" style="transform: none;"><div class="annotator-wrapper"><p class="ChapterNumber"><a id="Chap_12"></a>CHAPTER 12</p>
<p class="chapimage"><img src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/frontdot.jpg" alt="image" width="82" height="25" data-mfp-src="/library/view/nodejs-recipes-a/9781430260585/images/frontdot.jpg"></p>
<p class="ChapterTitle">Debugging and Deploying Your Application</p>
<div>
<p class="noindent">In this book you have seen a great deal of what you are capable of producing with Node.js. You have created an application, or you are envisioning an application that you will want to publish. This means you will need to become familiar with the process of deploying your code to several destinations for your code. In addition to deploying your code, you will revisit and expand on some of the debugging techniques from <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch07.xhtml">Chapter 7</a> when encountering the V8 debugging module.</p>
<p class="indent">There are several methods and platforms that are available to you as a Node.js developer that will allow you to deploy your code. In this chapter you will examine techniques that range from self-deployment on a machine that you own to deploying on a cloud-based platform as a service solution. You will also learn how to publish your modules to npm.</p>
<p class="indent">At the time of this writing there is an enormous variety in cloud-based platforms as service hosting solutions for your Node.js applications. This chapter is not a catalog of every possible hosting solution, but it looks at several common and practical methods you can utilize to host Node.js applications.</p>
<p id="Sec1" class="Heading1">12-1. Logging Information to the Console <a id="cXXX.665"></a></p>
<div>
<p id="Sec2" class="Heading2_2">Problem</p>
<p class="noindent">You need to be able to gather important information about your application by logging information to your console window.</p>
</div>
<div>
<p id="Sec3" class="Heading2">Solution</p>
<p class="noindent">The easiest way to log information to the command line when you are debugging your code is to use the console module<a id="cXXX.311e"></a> that is native to Node.js. In this solution you see there are various methods <a id="cXXX.666"></a>that can be used to log data to the console by using this module as shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list1" id="_list1">Listing 12-1</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list1" id="list1">Listing 12-1</a></i></b>.&nbsp;&nbsp;Logging to the Console</p>
<pre><span class="FontName1">/**</span><br><span class="FontName1">* Logging information to your console.</span><br><span class="FontName1">*/</span><br>&nbsp;<br><span class="FontName1">console.time('timer');</span><br><span class="FontName1">console.log('hey %s', 'there');</span><br><span class="FontName1">console.info('info');</span><br><span class="FontName1">console.warn('warn');</span><br><span class="FontName1">console.error('error');</span><br><span class="FontName1">console.dir(console);</span><br><span class="FontName1">console.trace(console.error('traced'));</span><br><span class="FontName1">console.assert(true !== false, 'true equals false');</span><br><span class="FontName1">console.timeEnd('timer');</span></pre>
</div>
<div>
<p id="Sec4" class="Heading2">How It Works</p>
<p class="noindent">The console module relies on Node.jss use of <span class="FontName1">stdout</span> and <span class="FontName1">stderr</span>. The console object in the Node.js source is created by accepting those two streams as arguments (see <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list2" id="_list2">Listing 12-2</a>).</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list2" id="list2">Listing 12-2</a></i></b>.&nbsp;&nbsp;Instantiating the Console</p>
<pre><span class="FontName1">function Console(stdout, stderr) {</span><br>&nbsp;&nbsp;<span class="FontName1">if (!(this instanceof Console)) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">return new Console(stdout, stderr);</span><br>&nbsp;&nbsp;<span class="FontName1">}</span><br>&nbsp;&nbsp;<span class="FontName1">if (!stdout || !util.isFunction(stdout.write)) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">throw new TypeError('Console expects a writable stream instance');</span><br>&nbsp;&nbsp;<span class="FontName1">}</span><br>&nbsp;&nbsp;<span class="FontName1">if (!stderr) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">stderr = stdout;</span><br>&nbsp;&nbsp;<span class="FontName1">}</span><br>&nbsp;&nbsp;<span class="FontName1">var prop = {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">writable: true,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">enumerable: false,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">configurable: true</span><br>&nbsp;&nbsp;<span class="FontName1">};</span><br>&nbsp;&nbsp;<span class="FontName1">prop.value = stdout;</span><br>&nbsp;&nbsp;<span class="FontName1">Object.defineProperty(this, '_stdout', prop);</span><br>&nbsp;&nbsp;<span class="FontName1">prop.value = stderr;</span><br>&nbsp;&nbsp;<span class="FontName1">Object.defineProperty(this, '_stderr', prop);</span><br>&nbsp;&nbsp;<span class="FontName1">prop.value = {};</span><br>&nbsp;&nbsp;<span class="FontName1">Object.defineProperty(this, '_times', prop);</span><br>&nbsp;<br>&nbsp;&nbsp;<span class="FontName1">// bind the prototype functions to this Console instance</span><br>&nbsp;&nbsp;<span class="FontName1">Object.keys(Console.prototype).forEach(function(k) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">this[k] = this[k].bind(this);</span><br>&nbsp;&nbsp;<span class="FontName1">}, this);</span><br><span class="FontName1">}</span></pre>
<p class="indent">Once the object is instantiated, the <span class="FontName1">stderr</span> and <span class="FontName1">stdout</span> properties are converted to properties on the console object itself by using the <span class="FontName1">Object.defineProperty()</span> method<a id="cXXX.667"></a>.</p>
<p class="indent">In your solution, you utilized each of the core methods that are exposed on the console object. First, and most common, is the <span class="FontName1">console.log()</span> method<a id="cXXX.668"></a>. This method accepts any number of arguments, formats them together using the <span class="FontName1">util</span> module as shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list3" id="_list3">Listing 12-3</a>, and writes the result to <span class="FontName1">stdout</span>. The <span class="FontName1">console.info</span> method is the same as the <span class="FontName1">console.log</span> method and formats the arguments in the same way.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list3" id="list3">Listing 12-3</a></i></b>.&nbsp;&nbsp;Console.log as a stdout.write</p>
<pre><span class="FontName1">Console.prototype.log = function() {</span><br>&nbsp;&nbsp;<span class="FontName1">this._stdout.write(util.format.apply(this, arguments) + '\n');</span><br><span class="FontName1">};</span><br>&nbsp;<br><span class="FontName1">Console.prototype.info = Console.prototype.log;</span></pre>
<p class="indent">The next console method you will encounter is the <span class="FontName1">console.error()</span> method<a id="cXXX.669"></a><a id="cXXX.670"></a>. This is the same as the <span class="FontName1">console.warn()</span> method<a id="cXXX.671"></a><a id="cXXX.672"></a>. These methods are similar to the <span class="FontName1">console.log()</span> and <span class="FontName1">console.info()</span> methods with the difference being that they write to the <span class="FontName1">stderr</span> instead of <span class="FontName1">stdout,</span> as shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list4" id="_list4">Listing 12-4</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list4" id="list4">Listing 12-4</a></i></b>.&nbsp;&nbsp;Console.error and console.warn</p>
<pre><span class="FontName1">Console.prototype.warn = function() {</span><br>&nbsp;&nbsp;<span class="FontName1">this._stderr.write(util.format.apply(this, arguments) + '\n');</span><br><span class="FontName1">};</span><br>&nbsp;<br><span class="FontName1">Console.prototype.error = Console.prototype.warn;</span></pre>
<p class="indent">Next you utilize the <span class="FontName1">console.dir()</span> method<a id="cXXX.673"></a><a id="cXXX.674"></a>. This function uses the <span class="FontName1">util.inspect()</span> method to describe the object that is passed to it (see <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list5" id="_list5">Listing 12-5</a>). In this case you inspect the console object itself.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list5" id="list5">Listing 12-5</a></i></b>.&nbsp;&nbsp;Console.dir()</p>
<pre><span class="FontName1">Console.prototype.dir = function(object) {</span><br>&nbsp;&nbsp;<span class="FontName1">this._stdout.write(util.inspect(object, { customInspect: false }) + '\n');</span><br><span class="FontName1">};</span></pre>
<p class="indent">The output of the <span class="FontName1">console.dir(console);</span> call is shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list6" id="_list6">Listing 12-6</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list6" id="list6">Listing 12-6</a></i></b>.&nbsp;&nbsp;Console.dir(console);</p>
<pre><span class="FontName1">{ log: [Function],</span><br>&nbsp;&nbsp;<span class="FontName1">info: [Function],</span><br>&nbsp;&nbsp;<span class="FontName1">warn: [Function],</span><br>&nbsp;&nbsp;<span class="FontName1">error: [Function],</span><br>&nbsp;&nbsp;<span class="FontName1">dir: [Function],</span><br>&nbsp;&nbsp;<span class="FontName1">time: [Function],</span><br>&nbsp;&nbsp;<span class="FontName1">timeEnd: [Function],</span><br>&nbsp;&nbsp;<span class="FontName1">trace: [Function],</span><br>&nbsp;&nbsp;<span class="FontName1">assert: [Function],</span><br>&nbsp;&nbsp;<span class="FontName1">Console: [Function: Console] }</span></pre>
<p class="indent">Next, ran <span class="FontName1">console.trace()</span><a id="cXXX.675"></a><a id="cXXX.676"></a> to log any error to <span class="FontName1">stderr</span> a stack trace. This methods source is shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list7" id="_list7">Listing 12-7</a>. You can see that the error is logged via the <span class="FontName1">console.error()</span> method once the name has been changed to demonstrate that it is a Trace;.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list7" id="list7">Listing 12-7</a></i></b>.&nbsp;&nbsp;Console.trace() Source</p>
<pre><span class="FontName1">Console.prototype.trace = function() {</span><br>&nbsp;&nbsp;<span class="FontName1">// TODO probably can to do this better with V8's debug object once that is</span><br>&nbsp;&nbsp;<span class="FontName1">// exposed.</span><br>&nbsp;&nbsp;<span class="FontName1">var err = new Error;</span><br>&nbsp;&nbsp;<span class="FontName1">err.name = 'Trace';</span><br>&nbsp;&nbsp;<span class="FontName1">err.message = util.format.apply(this, arguments);</span><br>&nbsp;&nbsp;<span class="FontName1">Error.captureStackTrace(err, arguments.callee);</span><br>&nbsp;&nbsp;<span class="FontName1">this.error(err.stack);</span><br><span class="FontName1">};</span></pre>
<p class="indent">The final console method that you will use is the <span class="FontName1">console.assert()</span> method<a id="cXXX.677"></a>. This method leverages the assert module to log the results of the <span class="FontName1">assert.ok()</span> method. You can see how this works internally in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list8" id="_list8">Listing 12-8</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list8" id="list8">Listing 12-8</a></i></b>.&nbsp;&nbsp;Console.assert()</p>
<pre><span class="FontName1">Console.prototype.assert = function(expression) {</span><br>&nbsp;&nbsp;<span class="FontName1">if (!expression) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">var arr = Array.prototype.slice.call(arguments, 1);</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">require('assert').ok(false, util.format.apply(this, arr));</span><br>&nbsp;&nbsp;<span class="FontName1">}</span><br><span class="FontName1">};</span></pre>
</div>
<p id="Sec5" class="Heading1">12-2. Using a Graphical Debugging Tool </p>
<div>
<p id="Sec6" class="Heading2_2">Problem</p>
<p class="noindent">You would like to utilize a tool that will allow you to debug your Node.js application in an integrated development environment (IDE)-like debugging tool. This means you want to have graphical access to your Node.js debugging environment.</p>
</div>
<div>
<p id="Sec7" class="Heading2">Solution</p>
<p class="noindent">One of the most basic yet most consistent cross-platform debugging tools for Node.js applications is an <span class="FontName1">npm</span> package called node-inspector<a id="cXXX.678"></a>. This package is used to bind the debugger that comes with a Blink-based browser, such as Google Chrome or the latest versions of Opera. You will then gain access to the native debugging tools for these browsers but it will allow you to navigate the code and debug your Node.js application in an IDE-like setting.</p>
<p class="indent">To get started with node-inspector, install it globally via <span class="FontName1">npm</span>. This gains you access to the node-inspector command that will allow you to start the debugger listening from any directory on your machine, as shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list9" id="_list9">Listing 12-9</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list9" id="list9">Listing 12-9</a></i></b>.&nbsp;&nbsp;Node-inspector Install and Implementation</p>
<pre><span class="FontName1">$ npm install -g node-inspector</span><br>&nbsp;<br><span class="FontName1">$ node-inspector</span><br><span class="FontName1">Node Inspector v0.3.1</span><br>&nbsp;&nbsp; <span class="FontName1">info&nbsp;&nbsp;- socket.io started</span><br><span class="FontName1">Visit</span> <span class="FontName1"><a href="http://127.0.0.1:8080/debug?port=5858">http://127.0.0.1:8080/debug?port=5858</a></span> <span class="FontName1">to start debugging.</span></pre>
<p class="indent">Once the inspector is running, you can begin a new instance of your Node.js application. For this example assume that a simple HTTP server responds with the text hello world.&nbsp;&nbsp;When you start this Node.js application you need to enable the debugging hooks by passing the parameter debug to the command. This looks like what you see in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list10" id="_list10">Listing 12-10</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list10" id="list10">Listing 12-10</a></i></b>.&nbsp;&nbsp;Beginning Node Inspection by Creating a Server</p>
<pre><span class="FontName1">$ node --debug 12-2-1.js</span><br><span class="FontName1">debugger listening on port 5858</span></pre>
</div>
<div>
<p id="Sec8" class="Heading2">How It Works</p>
<p class="noindent">Now that you have a debugger listening on the proper port and the inspector is running, you can experience the fun of using a graphical debugger by navigating to <span class="FontName1"><a href="http://127.0.0.1:8080/debug?port=5858">http://127.0.0.1:8080/debug?port=5858</a></span>. This is where the node-inspector has Blink developer tools opened and will allow you to debug your code. This initial interface will look similar to that shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#Fig1" id="_Fig1">Figure 12-1</a>. <a id="cXXX.679"></a>
</p>
<div class="Figure" id="Fig1">
<p class="img">
<img src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/9781430260585_Fig12-01.jpg" alt="9781430260585_Fig12-01.jpg" width="938" height="759" data-mfp-src="/library/view/nodejs-recipes-a/9781430260585/images/9781430260585_Fig12-01.jpg"></p>
<p class="FigCapt">
<span class="CaptNr">
<a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_Fig1">Figure 12-1</a>. </span>node-inspector initial state </p>
</div>
<p class="indent">From here you now have the ability to open up the Sources panel and view the source files that are available to you. This is shown in <a id="cXXX.680"></a>
<a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#Fig2" id="_Fig2">Figure 12-2</a>; you can select the file you wish to debug.</p>
<div class="Figure" id="Fig2">
<p class="img">
<img src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/9781430260585_Fig12-02.jpg" alt="9781430260585_Fig12-02.jpg" width="938" height="759" data-mfp-src="/library/view/nodejs-recipes-a/9781430260585/images/9781430260585_Fig12-02.jpg"></p>
<p class="FigCapt">
<span class="CaptNr">
<a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_Fig2">Figure 12-2</a>. </span>Sources panel in node-inspector </p>
</div>
<p class="indent">Once you have selected your file, you can now see the entire source that is running for that file in Node.js. <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#Fig3" id="_Fig3">Figure 12-3</a> shows how you have created a breakpoint and are debugging the Node.js application. This has broken at that point and the inspector has provided you with the call stack and scope variables and other important information that can be accessed through the debugger interface.</p>
<div class="Figure" id="Fig3">
<p class="img">
<img src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/9781430260585_Fig12-03.jpg" alt="9781430260585_Fig12-03.jpg" width="938" height="759" data-mfp-src="/library/view/nodejs-recipes-a/9781430260585/images/9781430260585_Fig12-03.jpg"></p>
<p class="FigCapt">
<span class="CaptNr">
<a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_Fig3">Figure 12-3</a>. </span>node-inspector viewing a source file<a id="cXXX.681"></a></p>
</div>
<p class="indent">Finally, node-inspector also gives you access to more detail about objects in your source code by providing hover-over information<a id="cXXX.682"></a>. This information gives you more detail about the object that is being inspected (see <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#Fig4" id="_Fig4">Figure 12-4</a>).</p>
<div class="Figure" id="Fig4">
<p class="img">
<img src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/9781430260585_Fig12-04.jpg" alt="9781430260585_Fig12-04.jpg" width="938" height="759" data-mfp-src="/library/view/nodejs-recipes-a/9781430260585/images/9781430260585_Fig12-04.jpg"></p>
<p class="FigCapt">
<span class="CaptNr">
<a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_Fig4">Figure 12-4</a>. </span>Hovering over an object with node-inspector </p>
</div>
</div>
<p id="Sec9" class="Heading1">12-3. Debugging Your Application in a Production Environment </p>
<div>
<p id="Sec10" class="Heading2_2">Problem</p>
<p class="noindent">You have a Node.js application running on a production server that is behaving in a manner that prompts you to step into the code and see what is happening. You need to be able to attach a debugger to the production process<a id="cXXX.683"></a> in order to debug your application.</p>
</div>
<div>
<p id="Sec11" class="Heading2">Solution</p>
<p class="noindent">Connecting to a Node.js process that is currently running is built into the Node.js debugging functionality. This will attach the V8 debugger to your application in the same way that starting your application with the debug flag will.</p>
<p class="indent">You first need to run a Node.js process. For this example you can start a simple HTTP server that you created for debugging in Section 12-2. Once you have this running, you need to find the process identifier on your operating system that is running this Node.js process. You can do this through an activity monitor, task manager on Windows, or the shell using grep <span class="FontName1">- $ ps ax | grep node.</span></p>
<p class="indent">Once you have the process identifier, you can then tell the debugger to connect to the process, as shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list11" id="_list11">Listing 12-11</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list11" id="list11">Listing 12-11</a></i></b>.&nbsp;&nbsp;Connecting the Debugger to a Node.js Process</p>
<pre><span class="FontName1">$ node debug -p 6284</span><br><span class="FontName1">connecting... ok</span><br><span class="FontName1">debug&gt;</span></pre>
<p class="indent">You now have the V8 debugger prompt, which is connected to your Node.js process (shown on your original command line as shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list12" id="_list12">Listing 12-12</a>).</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list12" id="list12">Listing 12-12</a></i></b>.&nbsp;&nbsp;Debugger Connected</p>
<pre><span class="FontName1">$ node 12-2-1.js</span><br><span class="FontName1">Starting debugger agent.</span><br><span class="FontName1">debugger listening on port 5858</span></pre>
<p class="indent">Once you are connected to the process, from the <span class="FontName1">debug&gt;</span> prompt you might like to know at what point in the process the current state of your application resides. You can do this by either pausing the application using <span class="FontName1">debug&gt; pause</span> or by processing a step into <span class="FontName1">debug&gt; s</span> or the next <span class="FontName1">debug&gt; n</span>.</p>
<p class="indent">You can now debug your application on production, to pinpoint where you are encountering issues in your application.</p>
</div>
<div>
<p id="Sec12" class="Heading2">How It Works</p>
<p class="noindent">Debugging<a id="cXXX.319j"></a> using the Node.js debugger was covered in detail in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch07.xhtml">Chapter 7</a>, and using the command <span class="FontName1">$ node debug p &lt;pid&gt;</span> to bind to a Node.js process will give you access to the same commands that you saw in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch07.xhtml">Chapter 7</a>. This is the V8 debugger that runs the debug terminal.</p>
<p class="indent">When you begin debugging, as mentioned above, you are able to see where you are at in the code by typing <span class="FontName1">debug&gt; n</span> (see <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list13" id="_list13">Listing 12-13</a>).</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list13" id="list13">Listing 12-13</a></i></b>.&nbsp;&nbsp;The Next Step in V8 Debugger</p>
<pre><span class="FontName1">connecting... ok</span><br><span class="FontName1">debug&gt; n</span><br><span class="FontName1">break in net.js:1153</span><br>&nbsp;<span class="FontName1">1151</span><br>&nbsp;<span class="FontName1">1152 function onconnection(clientHandle) {</span><br>&nbsp;<span class="FontName1">1153</span>&nbsp;&nbsp; <b>var</b>
<span class="FontName1">handle = this;</span><br>&nbsp;<span class="FontName1">1154&nbsp;&nbsp; var self = handle.owner;</span><br>&nbsp;<span class="FontName1">1155</span></pre>
<p class="indent">This listing is just an example of where you may find yourself in the code. In your case you may be anywhere inside of your application or the modules that are imported to your application. You can then continue to execute your program by typing <span class="FontName1">debug&gt; c</span>, as shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list14" id="_list14">Listing 12-14</a>. This example shows that by continuing you were able to run the code until it encountered the <span class="FontName1">debugger</span>; command. This command tells the V8 debugger to stop executing and to wait.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list14" id="list14">Listing 12-14</a></i></b>.&nbsp;&nbsp;Continue to Debugger</p>
<pre><span class="FontName1">debug&gt; c</span><br><span class="FontName1">break in c:\Users\cgackenheimer\Dropbox\book\code\12\12-2-1.js:7</span><br>&nbsp;&nbsp;<span class="FontName1">5</span><br>&nbsp;&nbsp;<span class="FontName1">6 var server = http.createServer(function(req, res) {</span><br>&nbsp;&nbsp;<span class="FontName1">7&nbsp;&nbsp;&nbsp;&nbsp; debugger;</span><br>&nbsp;&nbsp;<span class="FontName1">8&nbsp;&nbsp;&nbsp;&nbsp; res.end('hello world');</span><br>&nbsp;&nbsp;<span class="FontName1">9 });</span></pre>
<p class="indent">You are now able to debug your application and you did not need to start Node.js with the <span class="FontName1">debug</span> command passed to it. You only needed to find the process that was running and bind the V8 debugger to the application by using the process identifier.</p>
</div>
<p id="Sec13" class="Heading1">12-4. Continuously Running Your Server with Forever </p>
<div>
<p id="Sec14" class="Heading2_2">Problem</p>
<p class="noindent">You want to ensure that your Node.js process will continuously run and be able to restart after unexpected failures on your production machine.</p>
</div>
<div>
<p id="Sec15" class="Heading2">Solution</p>
<p class="noindent">To keep a Node.js process running, there are several choices that you have as a developer for doing so. In this solution you will examine how to utilize the forever module to keep your processes alive and running continuously.</p>
<p class="indent"><a id="cXXX.684"></a>To get started you must first install the forever module. The module source is located at<span class="FontName1"><a href="https://github.com/nodejitsu/forever">https://github.com/nodejitsu/forever</a></span> and can be installed as a global command-line module, as shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list15" id="_list15">Listing 12-15</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list15" id="list15">Listing 12-15</a></i></b>.&nbsp;&nbsp;Installing forever</p>
<pre><span class="FontName1">$ npm install -g forever</span></pre>
<p class="indent">Once you have forever installed from the command line, you are now able to run your Node.js process utilizing the command-line interface (CLI). In order to start your Node.js process utilizing the forever module, you must start the script by using the <span class="FontName1">forever start</span> command, as shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list16" id="_list16">Listing 12-16</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list16" id="list16">Listing 12-16</a></i></b>.&nbsp;&nbsp;forever start</p>
<pre><span class="FontName1">$ forever start app.js</span><br><span class="FontName1">warn:&nbsp;&nbsp;&nbsp;&nbsp;--minUptime not set. Defaulting to: 1000ms</span><br><span class="FontName1">warn:&nbsp;&nbsp;&nbsp;&nbsp;--spinSleepTime not set. Your script will exit if it does not stay up for at least 1000ms</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Forever processing file: app.js</span></pre>
<p class="indent">You can then check to see the status of any running applications that forever is serving by using the <span class="FontName1">forever list</span> command<a id="cXXX.685"></a> (see <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list17" id="_list17">Listing 12-17</a>).</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list17" id="list17">Listing 12-17</a></i></b>.&nbsp;&nbsp;forever list</p>
<pre><span class="FontName1">$ forever list</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;No forever processes running</span><br>&nbsp;<br><span class="FontName1"># Once a task is running.</span><br>&nbsp;<br><span class="FontName1">$ forever list</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Forever processes running</span><br><span class="FontName1">data:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uid&nbsp;&nbsp;command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; script&nbsp;&nbsp;&nbsp;&nbsp;forever pid&nbsp;&nbsp; logfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; uptime</span><br><span class="FontName1">data:&nbsp;&nbsp;&nbsp;&nbsp;[0] UJVS /usr/local/bin/node 12-2-1.js 41659&nbsp;&nbsp; 41660 /Users/gack/.forever/UJVS.log 0:0:2:46.801</span><br><span class="FontName1">data:&nbsp;&nbsp;&nbsp;&nbsp;[1] VVX7 /usr/local/bin/node app.js 41757&nbsp;&nbsp; 41758 /Users/gack/.forever/VVX7.log 0:0:0:3.444</span></pre>
<p class="indent">You may have noticed some warnings that state you have not specified <span class="FontName1">spinSleepTime</span> or <span class="FontName1">minUptime</span> forever options. To set these flags, they must be set before you tell forever to start. This will look like the example shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list18" id="_list18">Listing 12-18</a>, in which you specify a minimum uptime and spin sleeptime of 20 milliseconds each.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list18" id="list18">Listing 12-18</a></i></b>.&nbsp;&nbsp;Setting forever Flags<a id="cXXX.686"></a></p>
<pre><span class="FontName1">$ forever --minUptime 10 --spinSleepTime 10 start app.js</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Forever processing file: app.js</span></pre>
</div>
<div>
<p id="Sec16" class="Heading2">How It Works</p>
<p class="noindent">Forever is a Node.js module that ensures that the script you have told it to execute will run continuously. When you start an application with forever, you are actually creating a monitor instance that will attempt to spawn your script as a child process. It does this so that forever will be able to monitor the process of the child and restart the process if the child is interrupted. The process of starting the monitor is shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list19" id="_list19">Listing 12-19</a>, which is the forever source for the monitor.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list19" id="list19">Listing 12-19</a></i></b>.&nbsp;&nbsp;Starting a forever Monitor<a id="cXXX.687"></a></p>
<pre><span class="FontName1">Monitor.prototype.start = function (restart) {</span><br>&nbsp;&nbsp;<span class="FontName1">var self = this,</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">child;</span><br>&nbsp;<br>&nbsp;&nbsp;<span class="FontName1">if (this.running &amp;&amp; !restart) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">process.nextTick(function () {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">self.emit('error', new Error('Cannot start process that is already running.'));</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">});</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">return this;</span><br>&nbsp;&nbsp;<span class="FontName1">}</span><br>&nbsp;<br>&nbsp;&nbsp;<span class="FontName1">child = this.trySpawn();</span><br>&nbsp;&nbsp;<span class="FontName1">if (!child) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">process.nextTick(function () {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">self.emit('error', new Error('Target script does not exist: ' + self.args[0]));</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">});</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">return this;</span><br>&nbsp;&nbsp;<span class="FontName1">}</span><br>&nbsp;<br>&nbsp;&nbsp;<span class="FontName1">this.ctime = Date.now();</span><br>&nbsp;&nbsp;<span class="FontName1">this.child = child;</span><br>&nbsp;&nbsp;<span class="FontName1">this.running = true;</span><br>&nbsp;&nbsp;<span class="FontName1">process.nextTick(function () {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">self.emit(restart ? 'restart' : 'start', self, self.data);</span><br>&nbsp;&nbsp;<span class="FontName1">});</span><br>&nbsp;<br>&nbsp;&nbsp;<span class="FontName1">function onMessage(msg) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">self.emit('message', msg);</span><br>&nbsp;&nbsp;<span class="FontName1">}</span><br>&nbsp;<br>&nbsp;&nbsp;<span class="FontName1">// Re-emit messages from the child process</span><br>&nbsp;&nbsp;<span class="FontName1">this.child.on('message', onMessage);</span><br>&nbsp;<br>&nbsp;&nbsp;<span class="FontName1">child.on('exit', function (code, signal) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">var spinning = Date.now() - self.ctime &lt; self.minUptime;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">child.removeListener('message', onMessage);</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">self.emit('exit:code', code, signal);</span><br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">function letChildDie() {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">self.running = false;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">self.forceStop = false;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">self.emit('exit', self, spinning);</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">}</span><br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">function restartChild() {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">self.forceRestart = false;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">process.nextTick(function () {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">self.start(true);</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">});</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">}</span><br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">self.times++;</span><br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">if (self.forceStop || (self.times &gt;= self.max &amp;&amp; !self.forceRestart)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">|| (spinning &amp;&amp; typeof self.spinSleepTime !== 'number') &amp;&amp; !self.forceRestart) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">letChildDie();</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">else if (spinning) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">setTimeout(restartChild, self.spinSleepTime);</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">else {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">restartChild();</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">}</span><br>&nbsp;&nbsp;<span class="FontName1">});</span><br>&nbsp;<br>&nbsp;&nbsp;<span class="FontName1">return this;</span><br><span class="FontName1">};</span></pre>
<p class="indent">Once the child process has started, an event listener is bound to the process, listening for events. When the exit event is emitted, forever will check to see if the process is spinning and then restart the process. This is the foundation of forever: catching exiting processes and restarting them continuously.</p>
<p class="indent">As you built your solution you were able to see a few of the parameters that are used to manipulate the way in which forever executes. The full list of available parameters and options that can be used with forever is shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#Tab1" id="_Tab1">Table 12-1</a>.</p>
<div class="Table">
<p class="TabCapt">
<span class="CaptNr">
<a id="Tab1" href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_Tab1">Table 12-1</a>. </span>Options and Parameters<a id="cXXX.688"></a> for the forever Module </p>
<table>
<thead>
<tr class="header">
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td> Cleanlogs</td>
<td> Action</td>
<td> Deletes <i>all</i> forever log files.</td>
</tr>
<tr>
<td> Clear &lt;key&gt;</td>
<td> Action</td>
<td> Remotes the set key.</td>
</tr>
<tr>
<td> Columns add &lt;col&gt;</td>
<td> Action</td>
<td> Adds the specified column to the forever list output.</td>
</tr>
<tr>
<td> Columns rm &lt;col&gt;</td>
<td> Action</td>
<td> Removes the specified column from the forever list output.</td>
</tr>
<tr>
<td> Columns set &lt;col&gt;</td>
<td> Action</td>
<td> Set all columns for the forever list output.</td>
</tr>
<tr>
<td> Start</td>
<td> Action</td>
<td> Starts a Node.js script.</td>
</tr>
<tr>
<td> Config</td>
<td> Action</td>
<td> Lists all forever configurations.</td>
</tr>
<tr>
<td> List</td>
<td> Action</td>
<td> Lists all running processes.</td>
</tr>
<tr>
<td> Logs</td>
<td> Action</td>
<td> Lists the log files for all the forever processes.</td>
</tr>
<tr>
<td> Logs &lt;script|index&gt;</td>
<td> Action</td>
<td> Lists the log file for the specified script or index.</td>
</tr>
<tr>
<td> Restart</td>
<td> Action</td>
<td> Restarts a script.</td>
</tr>
<tr>
<td> Restartall</td>
<td> Action</td>
<td> Restarts all scripts.</td>
</tr>
<tr>
<td> Set &lt;key&gt; &lt;val&gt;</td>
<td> Action</td>
<td> Sets an option specified by the key and the value.</td>
</tr>
<tr>
<td> Stop</td>
<td> Action</td>
<td> Stops the script execution.</td>
</tr>
<tr>
<td> Stopall</td>
<td> Action</td>
<td> Stops all the forever scripts.</td>
</tr>
<tr>
<td> -a append</td>
<td> Option</td>
<td> Appends the logs.</td>
</tr>
<tr>
<td> -c Command</td>
<td> Option</td>
<td> This is the command to be executedthis defaults to node.</td>
</tr>
<tr>
<td> -d, --debug</td>
<td> Option</td>
<td> Log debug output.</td>
</tr>
<tr>
<td> -e ERRFILE</td>
<td> Option</td>
<td> Specifies a named error file.</td>
</tr>
<tr>
<td> -f fifo</td>
<td> Option</td>
<td> Stream logs to stdout.</td>
</tr>
<tr>
<td> -h, --help</td>
<td> Option</td>
<td> Shows help.</td>
</tr>
<tr>
<td> -l LOGFILE</td>
<td> Option</td>
<td> Specifies a named log file.</td>
</tr>
<tr>
<td> -m&nbsp;&nbsp;MAX</td>
<td> Option</td>
<td> Runs the script for only a maximum number of times.</td>
</tr>
<tr>
<td> -o OUTFILE</td>
<td> Option</td>
<td> Specifies a named out file.</td>
</tr>
<tr>
<td> -p PATH</td>
<td> Option</td>
<td> Specifies the log file path.</td>
</tr>
<tr>
<td> -s, --silent</td>
<td> Option</td>
<td> Silences stdout and stderr on the child script.</td>
</tr>
<tr>
<td> -v,&nbsp;&nbsp;--verbose</td>
<td> Option</td>
<td> Turns on verbose messages from forever.</td>
</tr>
<tr>
<td> -w, --watch</td>
<td> Option</td>
<td> Watches for file changes, restarting if detected.</td>
</tr>
<tr>
<td> --minUptime</td>
<td> Option</td>
<td> Sets the minimum uptime in milliseconds that the script is considered spinning.</td>
</tr>
<tr>
<td> --pidFILE</td>
<td> Option</td>
<td> Lists the pid file.</td>
</tr>
<tr>
<td> --plain</td>
<td> Option</td>
<td> Disables command-line coloring.</td>
</tr>
<tr>
<td> --sourceDir</td>
<td> Option</td>
<td> Lists the source directory that the SCRIPT is relative to. </td>
</tr>
<tr>
<td> --spinSleepTime</td>
<td> Option</td>
<td> Lists the time in milliseconds to wait between launches of the spinning script.</td>
</tr>
<tr>
<td> --watchDirectory</td>
<td> Option</td>
<td> Lists the top-level watch directory.</td>
</tr>
</tbody>
</table>
</div>
</div>
<p id="Sec17" class="Heading1">12-5. Deploying Your Application on Your Own Server </p>
<div>
<p id="Sec18" class="Heading2_2">Problem</p>
<p class="noindent">You have a server that you have dedicated to hosting your Node.js application and you need to be able to deploy your application to that server.</p>
</div>
<div>
<p id="Sec19" class="Heading2">Solution</p>
<p class="noindent">Deploying your application to your own server requires a few steps to happen. To do this, you can manually copy the files over to your destination server, install the npm dependencies, and start the script, but there are more automated ways for doing this (as you can see in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list20" id="_list20">Listing 12-20</a>). This solution will utilize a Git process<a id="cXXX.689"></a> to install dependencies and start your Node.js application.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list20" id="list20">Listing 12-20</a></i></b>.&nbsp;&nbsp;Deploying with Git</p>
<pre><span class="FontName1">## Initialize the repository</span><br><span class="FontName1">$ git init</span><br><span class="FontName1">## add your files</span><br><span class="FontName1">$ git add .</span><br><span class="FontName1">## make a change to your source on the development machine</span><br><span class="FontName1">$ git commit am I made an important change</span><br><span class="FontName1">$ git push origin</span></pre>
<p class="indent">This will push the changes to the Git repository that is located on your remote production machine and it will then use a Git post-receive hook to install dependencies and start your Node.js application.</p>
</div>
<div>
<p id="Sec20" class="Heading2">How It Works</p>
<p class="noindent">The key to this process is the nature of Gits post-receive hooks. This will execute a bash script each time that a change is received in the repository. To get started you need to build a post-receive file<a id="cXXX.690"></a> in the hooks directory of your production Git repository. A basic deploy script would look like the one shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list21" id="_list21">Listing 12-21</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list21" id="list21">Listing 12-21</a></i></b>.&nbsp;&nbsp;Basic repo.git/hooks/post-receive File</p>
<pre><span class="FontName1">#!/bin/sh</span><br><span class="FontName1">echo "processing post receive hook"</span><br><span class="FontName1">echo "installing npm dependencies"</span><br><span class="FontName1">npm install</span><br><span class="FontName1">echo "starting application"</span><br><span class="FontName1">node app.js</span></pre>
<p class="indent">This will utilize the package.json file that is part of your repository, and it will utilize npm to install any dependencies that your code requires. After these are installed it will begin the node process by running the node app.js command. However, as you saw in the previous section, you may want to accommodate for failures and run this script by using forever<a id="cXXX.691"></a>. Assuming that you have already installed forever on your production machine globally, you can alter your script to look like what is shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list22" id="_list22">Listing 12-22</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list22" id="list22">Listing 12-22</a></i></b>.&nbsp;&nbsp;Post-receive Hook Using forever</p>
<pre><span class="FontName1">#!/bin/sh</span><br><span class="FontName1">echo "processing post receive hook"</span><br><span class="FontName1">forever stop app.js</span><br><span class="FontName1">echo "installing npm dependencies"</span><br><span class="FontName1">npm install</span><br><span class="FontName1">echo "starting application"</span><br><span class="FontName1">forever start app.js</span></pre>
<div class="notepara">
<p class="paraaftertitle1"><img src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/sq.jpg" alt="image" width="12" height="12" data-mfp-src="/library/view/nodejs-recipes-a/9781430260585/images/sq.jpg">&nbsp;<b>Note</b>&nbsp;&nbsp;Running your post-receive hook in this manner will stop your server for the entirety of your npm install. In a volatile production environment it is best to segregate these events so that you do not limit production uptime.</p></div>
<p class="indent">By using the post-receive hooks you can deploy your code as you would normally, targeting a production repository, and then have Git initialize the build-and-deploy process on the target machine.</p>
</div>
<p id="Sec21" class="Heading1">12-6. Publishing Your Code to npm </p>
<div>
<p id="Sec22" class="Heading2_2">Problem</p>
<p class="noindent">You have built a Node.js module that you would like to share with the greater Node.js community. In order to do this you will want to deploy your module to npm.</p>
</div>
<div>
<p id="Sec23" class="Heading2">Solution</p>
<p class="noindent">With npm, it is simple to create and publish a module to the registry. To do this, you simply use the <span class="FontName1">npm publish</span> command<a id="cXXX.692"></a> shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list23" id="_list23">Listing 12-23</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list23" id="list23">Listing 12-23</a></i></b>.&nbsp;&nbsp;Publishing to npm</p>
<pre><span class="FontName1">$ npm publish /path/to/your/module</span></pre>
</div>
<div>
<p id="Sec24" class="Heading2">How It Works</p>
<p class="noindent">This solution works by leveraging the npm command-line tool. This will read the directory that you have specified, which alternatively could be a tarball of the module. Once this is read, it will read the package.json file that is associated with the file and determine if the module is eligible for publication. The name and the version of the package must be unique or the publication will fail. </p>
<p class="indent">Once it is determined that the publication is allowed, the package will be added to the npm registry and will be discoverable by Node.js developers everywhere.</p>
</div>
<p id="Sec25" class="Heading1">12-7. Using Amazon Web Services to Host Your Application </p>
<div>
<p id="Sec26" class="Heading2_2">Problem</p>
<p class="noindent">You want to deploy your Node.js application to be hosted on the Amazon Web Services (AWS<a id="cXXX.693"></a><a id="cXXX.694"></a>) hosting platform.</p>
</div>
<div>
<p id="Sec27" class="Heading2">Solution</p>
<p class="noindent">For deploying to AWS, you first need to create an AWS account found at <span class="FontName1"><a href="http://aws.amazon.com/">http://aws.amazon.com</a></span>. From there you can then create an Elastic Compute Cloud (EC2) instance; in this solution Ubuntu Server 12.04 was utilized. Once you have your EC2 instance provisioned you can then connect with Secure Shell (SSH) into that instance by using the key pair that you downloaded when you created the instance.</p>
<p class="indent">If you are planning to host a web application on your EC2 instance, you need to ensure that the Security Group which the EC2 instance is utilizing has opened port 80 so that the web content can be served.</p>
<p class="indent">Once you are remotely connected to your Ubuntu instance, you will want to install Node.js. You can use the Ubuntu package by Chris Lea for this, or you can install from the source shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list24" id="_list24">Listing 12-24</a>. Once you have Node.js and npm installed, then the next step is to get your source code to the remote server on AWS.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list24" id="list24">Listing 12-24</a></i></b>.&nbsp;&nbsp;Installing node.js</p>
<pre><span class="FontName1">$ sudo apt-get update</span><br><span class="FontName1">$ sudo apt-get install build-essential libssl-dev</span><br><span class="FontName1">$ git clone</span><span class="FontName1"><a href="https://github.com/joyent/node.git">https://github.com/joyent/node.git</a></span><br><span class="FontName1">$ ./configure</span><br><span class="FontName1">$ make</span><br><span class="FontName1">$ sudo make install</span></pre>
<p class="indent">Now that you have Node.js installed, you can run a simple web application by running a node app with an HTTP server bound on port 80, <span class="FontName1">$ sudo node app.js</span>. However, you likely will have code from another location you would like to serve from the server.&nbsp;&nbsp;There are several ways that you can do this, but it has become increasingly popular to utilize a GitHub or other Git repository in order to transfer your code to your server. Again, simply clone this repository, ensure that you have the source configured to listen on port 80, and you can start your Node.js application on the server.</p>
<p class="indent">This can also work the other way, just as you saw in Section 12-5, where you can create a production Git repository on your EC2 instance with a post-receive hook installed and you will be able to deploy directly to that repository from your local development environment.</p>
</div>
<div>
<p id="Sec28" class="Heading2">How It Works</p>
<p class="noindent">Utilizing the AWS EC2 works because it provisions a virtual instance of a real Ubuntu server. This means that you are able to run everything that you would on a typical Ubuntu server (or another type of EC2 server instance) installation; thus you are able to run Node.js. EC2 provides you with granular control over security and provisioning for your server so that you can tell it to open port 80 and provision new instances with the click of a button.</p>
<p class="indent">Once you have Node.js installed, you are able to run a Node.js application as you would as if you were running it locally. To run a Node.js application on port 80 by using Ubuntu server does require an elevated privilege, which is why you needed to utilize the <span class="FontName1">sudo</span> command to start your application. If you had omitted this and still attempted to run on port 80, you would have encountered an error like the one shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list25" id="_list25">Listing 12-25</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list25" id="list25">Listing 12-25</a></i></b>.&nbsp;&nbsp;Requiring Elevated Permissions for Port 80</p>
<pre><span class="FontName1">ubuntu@ip:/test$ node app.js</span><br>&nbsp;<br><span class="FontName1">events.js:80</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">throw er; // Unhandled 'error' event</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">^</span><br> <b>Error: listen EACCES</b><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">at exports._errnoException (util.js:676:11)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">at Server._listen2 (net.js:1051:19)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">at listen (net.js:1093:10)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">at Server.listen (net.js:1168:5)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">at Object.&lt;anonymous&gt; (/home/ubuntu/test/app.js:7:8)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">at Module._compile (module.js:449:26)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">at Object.Module._extensions..js (module.js:467:10)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">at Module.load (module.js:349:32)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">at Function.Module._load (module.js:305:12)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1">at Function.Module.runMain (module.js:490:10)</span><br><span class="FontName1">ubuntu@ip:/test$ sudo node app.js</span></pre>
</div>
<p id="Sec29" class="Heading1">12-8. Deploying Your Application Using Heroku <a id="cXXX.695"></a></p>
<div>
<p id="Sec30" class="Heading2_2">Problem</p>
<p class="noindent">There are several solutions that represent platforms that you as a developer are able to utilize to deploy your code to the cloud. One of these that allows for Node.js applications is Heroku. You would like to be able to install your application to the Heroku platform<a id="cXXX.327e"></a> as a service.</p>
</div>
<div>
<p id="Sec31" class="Heading2">Solution</p>
<p class="noindent">To install your Node.js application to the Heroku platform, there are essentially two steps: install the Heroku command-line tools (known as the toolbelt), and then push your code to Heroku for deployment<a id="cXXX.327u"></a>.</p>
<p class="indent">In order to get started, you must first download the <a id="cXXX.696"></a>Heroku toolbelt from the Heroku web site,<span class="FontName1"><a href="https://toolbelt.heroku.com/">https://toolbelt.heroku.com</a></span>, shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#Fig5" id="_Fig5">Figure 12-5</a>.</p>
<div class="Figure" id="Fig5">
<p class="img">
<img src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/9781430260585_Fig12-05.jpg" alt="9781430260585_Fig12-05.jpg" width="650" height="275" data-mfp-src="/library/view/nodejs-recipes-a/9781430260585/images/9781430260585_Fig12-05.jpg"></p>
<p class="FigCapt">
<span class="CaptNr">
<a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_Fig5">Figure 12-5</a>. </span>Heroku toolbelt download page </p>
</div>
<p class="indent">Once you have downloaded the toolbelt, you must now sign in to Heroku by using the CLI. Now would be a good time to create a Heroku account online if you have not yet done so. You can sign on to Heroku by using the toolbelt CLI, as shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list26" id="_list26">Listing 12-26</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list26" id="list26">Listing 12-26</a></i></b>.&nbsp;&nbsp;Heroku Login<a id="cXXX.697"></a></p>
<pre><span class="FontName1">&gt; heroku login</span><br><span class="FontName1">Enter your Heroku credentials.</span><br><span class="FontName1">Email:</span> <span class="FontName1"><a href="mailto:your.name@email.com">your.name@email.com</a></span><br><span class="FontName1">Password (typing will be hidden):</span><br><span class="FontName1">Authentication successful.</span></pre>
<p class="indent">Next, you can go about the business of developing your Node.js application as you normally would, ensuring that dependencies are listed in your package.json file associated with the application. The subtle differences occur when you are preparing to test and deploy your application with Heroku.</p>
<p class="indent">When you deploy a Node.js application to Heroku, you must first create a file, called Procfile, in the root of your application. This file will tell Heroku the type of application process that you are attempting to create. In the case of a Node.js application you will generate a <a id="cXXX.698"></a>Procfile that will tell Heroku you intend to create a web application and the node &lt;script&gt; target that will be the entry for your application (see <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list27" id="_list27">Listing 12-27</a>).</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list27" id="list27">Listing 12-27</a></i></b>.&nbsp;&nbsp;A Node.js Procfile for Heroku</p>
<pre><span class="FontName1">web: node server.js</span></pre>
<p class="indent">You can now test your application utilizing Herokus testing service called Foreman. This happens when you type <span class="FontName1">$ foreman start</span><a id="cXXX.699"></a> in the directory that houses your Procfile. This will create a local web instance of your application running on port 5000 by default, allowing you to test your application before you deploy.</p>
<p class="indent">After testing is completed, you can deploy your application to the Heroku platform. This is done by first storing the application into a Git repository, if it is not already present in one. This Git repository is then associated with a Heroku origin with the command <span class="FontName1">$ heroku create</span>. This will generate a creative and unique URL for your application, and it will add a remote of Heroku to the Git repository. The Heroku remote will be the target of your deployment pushes. Once you have successfully committed your changes, you can push them to the Heroku remote and the deploy will automatically commence, showing you stdout of the process as it occurs, as shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list28" id="_list28">Listing 12-28</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list28" id="list28">Listing 12-28</a></i></b>.&nbsp;&nbsp;Abridged Deploy Output<a id="cXXX.700"></a></p>
<pre><span class="FontName1">$ git push heroku master</span><br><span class="FontName1">Counting objects: 7, done.</span><br><span class="FontName1">Delta compression using up to 4 threads.</span><br><span class="FontName1">Compressing objects: 100% (4/4), done.</span><br><span class="FontName1">Writing objects: 100% (4/4), 361 bytes | 0 bytes/s, done.</span><br><span class="FontName1">Total 4 (delta 3), reused 0 (delta 0)</span><br>&nbsp;<br><span class="FontName1">-----&gt; Node.js app detected</span><br><span class="FontName1">-----&gt; Resolving engine versions</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName1">Using Node.js version: 0.8.21</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName1">Using npm version: 1.1.65</span><br><span class="FontName1">-----&gt; Fetching Node.js binaries</span><br><span class="FontName1">-----&gt; Vendoring node into slug</span><br><span class="FontName1">-----&gt; Installing dependencies with npm</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName1">Dependencies installed</span><br><span class="FontName1">-----&gt; Building runtime environment</span><br><span class="FontName1">-----&gt; Discovering process types</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName1">Procfile declares types -&gt; app, restart</span><br>&nbsp;<br><span class="FontName1">-----&gt; Compiled slug size: 35.7MB</span><br><span class="FontName1">-----&gt; Launching... done, v122</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName1"><a href="http://http//%20yourrepo.herokuapp.com">http:// yourrepo.herokuapp.com</a> yourrepo.herokuapp.com deployed to Heroku</span><br>&nbsp;<br><span class="FontName1">To</span> <span class="FontName1"><a href="mailto:git@heroku.com:yourrepo.git">git@heroku.com:yourrepo.git</a></span><br>&nbsp;&nbsp; <span class="FontName1">Sha...hash&nbsp;&nbsp;master -&gt; master</span></pre>
<p class="indent">You will not only be able to view your application on the web, but the Heroku web interface will also give you an insight into the state of your application<a id="cXXX.701"></a> (see <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#Fig6" id="_Fig6">Figure 12-6</a>).</p>
<div class="Figure" id="Fig6">
<p class="img">
<img src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/9781430260585_Fig12-06.jpg" alt="9781430260585_Fig12-06.jpg" width="825" height="502" data-mfp-src="/library/view/nodejs-recipes-a/9781430260585/images/9781430260585_Fig12-06.jpg"></p>
<p class="FigCapt">
<span class="CaptNr">
<a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_Fig6">Figure 12-6</a>. </span>Heroku dashboard </p>
</div>
</div>
<div>
<p id="Sec32" class="Heading2">How It Works</p>
<p class="noindent">Heroku deployment for Node.js works by leveraging Git to deploy code to the appropriate technology stack in the Heroku platform.</p>
<p class="indent">When you first generate your Procfile, which tells Heroku which process you want to run your Node.js under, you tell it to use the web type. This means that the web stack and web-routing processes will be utilized in order to generate and run your application.</p>
<p class="indent">Heroku will also, during the deploy process, automatically detect a Node.js application and know that it will ensure that the prescribed versions of Node.js and npm are installed and utilized. It will then parse your package.json file and install the listed dependencies before attempting to run your application. You now have your application running on the Heroku platform.</p>
</div>
<p id="Sec33" class="Heading1">12-9. Deploying Your Application to Nodejitsu<a id="cXXX.330h"></a> </p>
<div>
<p id="Sec34" class="Heading2_2">Problem<a id="cXXX.702"></a></p>
<p class="noindent">You want to utilize Nodejitsu in order to host your Node.js application on the cloud.</p>
</div>
<div>
<p id="Sec35" class="Heading2">Solution</p>
<p class="noindent">To start deploying your Node.js application<a id="cXXX.330c"></a> with Nodejitsu, you must first create a Nodejitsu account at<span class="FontName1"><a href="https://www.nodejitsu.com/signup/">https://www.nodejitsu.com/signup/</a></span>. Once you have an account, install the command-line tools that are utilized to deploy your Node.js application to the cloud.</p>
<p class="indent">To install the CLI for Nodejitsu, use npm and install it globally, as shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list29" id="_list29">Listing 12-29</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list29" id="list29">Listing 12-29</a></i></b>.&nbsp;&nbsp;Installing<a id="cXXX.703"></a> the Jitsu CLI</p>
<pre><span class="FontName1">$ npm install -g jitsu</span></pre>
<p class="indent">This will then give you access to all of the features of the Nodejitsu command line. You can see what commands are available to you by typing <span class="FontName1">$ jitsu</span>, which will output all of the help documentation, as you can see in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list30" id="_list30">Listing 12-30</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list30" id="list30">Listing 12-30</a></i></b>.&nbsp;&nbsp;$ jitsu Options<a id="cXXX.704"></a></p>
<pre><span class="FontName1">$ jitsu</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Welcome to Nodejitsu cgack</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;jitsu v0.13.0, node v0.10.17</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;It worked if it ends with Nodejitsu ok</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Executing command</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;___&nbsp;&nbsp;__</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;/&nbsp;&nbsp;/&nbsp;&nbsp; /_&nbsp;&nbsp;/&nbsp;&nbsp;/</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp; __/&nbsp;&nbsp;/&nbsp;&nbsp;/&nbsp;&nbsp; __/ /__/</span><br><span class="FontName1">help:</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;Flawless deployment of Node.js apps to the cloud</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;open-source and fully customizable.</span><br><span class="FontName1">help:</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName1"><a href="https://github.com/nodejitsu/jitsu">https://github.com/nodejitsu/jitsu</a></span><br><span class="FontName1">help:</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;Usage:</span><br><span class="FontName1">help:</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu &lt;resource&gt; &lt;action&gt; &lt;param1&gt; &lt;param2&gt; ...</span><br><span class="FontName1">help:</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;Common Commands:</span><br><span class="FontName1">help:</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;To sign up for Nodejitsu</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu signup</span><br><span class="FontName1">help:</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;To log into Nodejitsu</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu login</span><br><span class="FontName1">help:</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;To install a pre-built application</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu install</span><br><span class="FontName1">help:</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;Deploys current path to Nodejitsu</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu deploy</span><br><span class="FontName1">help:</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;Lists all applications for the current user</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu list</span><br><span class="FontName1">help:</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;Additional Commands</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu apps</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu cloud</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu logs</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu env</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu conf</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu users</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu databases</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu snapshots</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu tokens</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu logout</span><br><span class="FontName1">help:</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;Options:</span><br><span class="FontName1">help:&nbsp;&nbsp;--version, -v&nbsp;&nbsp; print jitsu version and exit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [string]</span><br><span class="FontName1">help:&nbsp;&nbsp;--localconf&nbsp;&nbsp;&nbsp;&nbsp; search for .jitsuconf file in ./ and then parent directories&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [string]</span><br><span class="FontName1">help:&nbsp;&nbsp;--jitsuconf, -j&nbsp;&nbsp;specify file to load configuration from&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[string]</span><br><span class="FontName1">help:&nbsp;&nbsp;--noanalyze&nbsp;&nbsp;&nbsp;&nbsp; skip require-analyzer: do not attempt to dynamically detect dependencies&nbsp;&nbsp;[boolean]</span><br><span class="FontName1">help:&nbsp;&nbsp;--colors&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--no-colors will disable output coloring&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [boolean]&nbsp;&nbsp;[default: true]</span><br><span class="FontName1">help:&nbsp;&nbsp;--confirm, -c&nbsp;&nbsp; prevents jitsu from asking before overwriting/removing things&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[boolean]&nbsp;&nbsp;[default: false]</span><br><span class="FontName1">help:&nbsp;&nbsp;--release, -r&nbsp;&nbsp; specify release version number or semantic increment (build, patch, minor, major)&nbsp;&nbsp;[string]</span><br><span class="FontName1">help:&nbsp;&nbsp;--raw&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; jitsu will only output line-delimited raw JSON (useful for piping)&nbsp;&nbsp;[boolean]</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Nodejitsu ok</span></pre>
<p class="indent">You now need to log in to your Jitsu account by using the <span class="FontName1">$ jitsu users</span> login command<a id="cXXX.705"></a> (see <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list31" id="_list31">Listing 12-31</a>).</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list31" id="list31">Listing 12-31</a></i></b>.&nbsp;&nbsp;Jitsu Login</p>
<pre><span class="FontName1">$ jitsu users login</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Welcome to Nodejitsu</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;jitsu v0.13.0, node v0.10.17</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;It worked if it ends with Nodejitsu ok</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Executing command users login</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;An activated nodejitsu account is required to login</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;To create a new account use the jitsu signup command</span><br><span class="FontName1">prompt: username:&nbsp;&nbsp;you</span><br><span class="FontName1">prompt: password:</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Authenticated as you</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Nodejitsu ok</span></pre>
<p class="indent">At this point, you can create a Nodejitsu application from your Node.js source by navigating to that source directory and using the command <span class="FontName1">$ jitsu deploy</span>. This will then prompt you for a subdomain, a start script, the version you wish to name this deploy as, and the Node.js engine version you require to run. The subdomain will then be how you identify your application. To see a list of running applications once you have deployed a Jitsu app<a id="cXXX.706"></a>, use the <span class="FontName1">jitsu apps list</span> command, as shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list32" id="_list32">Listing 12-32</a>.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list32" id="list32">Listing 12-32</a></i></b>.&nbsp;&nbsp;Listing Nodejitsu Applications</p>
<pre><span class="FontName1">$ jitsu apps list</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Welcome to Nodejitsu cgack</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;jitsu v0.13.0, node v0.10.17</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;It worked if it ends with Nodejitsu ok</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Executing command apps list</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Listing all apps for user</span><br><span class="FontName1">data:&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;state&nbsp;&nbsp; subdomain drones running snapshot</span><br><span class="FontName1">data:&nbsp;&nbsp;&nbsp;&nbsp;wizards stopped wizards&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0/1&nbsp;&nbsp;&nbsp;&nbsp;user-wizards-0.0.1-4.tgz</span><br><span class="FontName1">data:&nbsp;&nbsp;&nbsp;&nbsp;wsserv&nbsp;&nbsp;stopped wsserv&nbsp;&nbsp;&nbsp;&nbsp; 0/1&nbsp;&nbsp;&nbsp;&nbsp;user-wsserv-0.0.1-7.tgz</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Nodejitsu ok</span></pre>
</div>
<div>
<p id="Sec36" class="Heading2">How It Works</p>
<p class="noindent">By using the Jitsu command line, you can deploy code to the Nodejitsu cloud platform with simple commands. This happens because Nodejitsu knows and expects a Node.js application to be deployed to the platform. When you run <span class="FontName1">jitsu deploy</span> on your source it will provision a virtual server that will host your subdomain on the server, allowing you to run your Node.js application in the cloud.</p>
<p class="indent">Similar to the Heroku CLI, Jitsu allows you to manage your applications and your account fully from the command line. This means that you can start, stop, restart, view, and create applications with the command line<a id="cXXX.707"></a>, as you can see from <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#list33" id="_list33">Listing 12-33</a>, which outlines the Jitsu apps * procedures available.</p>
<p class="noindent2"><b><i><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_list33" id="list33">Listing 12-33</a></i></b>.&nbsp;&nbsp;Jitsu apps*</p>
<pre><span class="FontName1">$ jitsu apps</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Welcome to Nodejitsu cgack</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;jitsu v0.13.0, node v0.10.17</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;It worked if it ends with Nodejitsu ok</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Executing command apps</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;The `jitsu apps` command manages</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;Applications on Nodejitsu. Valid commands are:</span><br><span class="FontName1">help:</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;jitsu apps deploy</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;jitsu apps list</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;jitsu apps create</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;jitsu apps cloud&nbsp;&nbsp; [&lt;name&gt;]</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;jitsu apps view&nbsp;&nbsp;&nbsp;&nbsp;[&lt;name&gt;]</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;jitsu apps update&nbsp;&nbsp;[&lt;name&gt;]</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;jitsu apps destroy [&lt;name&gt;]</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;jitsu apps start&nbsp;&nbsp; [&lt;name&gt;]</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;jitsu apps restart [&lt;name&gt;]</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;jitsu apps stop&nbsp;&nbsp;&nbsp;&nbsp;[&lt;name&gt;]</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;jitsu apps setdrones [&lt;name&gt;] &lt;number&gt;</span><br><span class="FontName1">help:</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;For commands that take a &lt;name&gt; parameter, if no parameter</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;is supplied, jitsu will attempt to read the package.json</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;from the current directory.</span><br><span class="FontName1">help:</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;Options:</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--version, -v&nbsp;&nbsp;&nbsp;&nbsp;print jitsu version and exit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [string]</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--localconf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;search for .jitsuconf file in ./ and then parent directories&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [string]</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--jitsuconf, -j&nbsp;&nbsp;specify file to load configuration from&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[string]</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--noanalyze&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;skip require-analyzer: do not attempt to dynamically detect dependencies&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [boolean]</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--colors&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --no-colors will disable output coloring&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [boolean]&nbsp;&nbsp;[default: true]</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--confirm, -c&nbsp;&nbsp;&nbsp;&nbsp;prevents jitsu from asking before overwriting/removing things&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[boolean]&nbsp;&nbsp;[default: false]</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--release, -r&nbsp;&nbsp;&nbsp;&nbsp;specify release version number or semantic increment (build, patch, minor, major)&nbsp;&nbsp;[string]</span><br><span class="FontName1">help:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--raw&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jitsu will only output line-delimited raw JSON (useful for piping)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [boolean]</span><br><span class="FontName1">info:&nbsp;&nbsp;&nbsp;&nbsp;Nodejitsu ok</span></pre>
</div>
<p id="Sec37" class="Heading1">12-10. Deploying to Windows Azure</p>
<div>
<p id="Sec38" class="Heading2_2">Problem</p>
<p class="noindent"><a id="cXXX.708"></a>You want to utilize the Windows Azure cloud platform to deploy your Node.js solution.</p>
</div>
<div>
<p id="Sec39" class="Heading2">Solution</p>
<p class="noindent">When Node.js was first created, running Node on Windows was an afterthought. Today Windows has become a first-class citizen in the Node.js realm and as such Microsoft has devoted a great deal of time and effort to making deploying Node.js code and managing it on their cloud platformAzureeasy and accessible to developers.</p>
<p class="indent">To get started with Node.js and Azure, you must first create an account. Sign in to the Azure management portal found at<span class="FontName1"><a href="https://manage.windowsazure.com/">https://manage.windowsazure.com</a></span>. Once you have signed in, you can create a new web site. Click on the large + New button and then select web site. You will then name your subdomain and select a region before creating your web site. This process is shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#Fig7" id="_Fig7">Figure 12-7</a>.<a id="cXXX.709"></a>
</p>
<div class="Figure" id="Fig7">
<p class="img">
<img src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/9781430260585_Fig12-07.jpg" alt="9781430260585_Fig12-07.jpg" width="938" height="425" data-mfp-src="/library/view/nodejs-recipes-a/9781430260585/images/9781430260585_Fig12-07.jpg"></p>
<p class="FigCapt">
<span class="CaptNr">
<a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_Fig7">Figure 12-7</a>. </span>Creating an Azure web site for your Node.js application </p>
</div>
<p class="indent">From here, one of the easiest ways to get a Node.js application created is to go to the dashboard for your newly created application and select the Set up deployment from source control option. This option will then present you with the ability to choose any location in which you have stored your application source as source control<a id="cXXX.710"></a>, which will look similar to <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#Fig8" id="_Fig8">Figure 12-8</a>.</p>
<div class="Figure" id="Fig8">
<p class="img">
<img src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/9781430260585_Fig12-08.jpg" alt="9781430260585_Fig12-08.jpg" width="725" height="609" data-mfp-src="/library/view/nodejs-recipes-a/9781430260585/images/9781430260585_Fig12-08.jpg"></p>
<p class="FigCapt">
<span class="CaptNr">
<a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_Fig8">Figure 12-8</a>. </span>Source of the application in Azure </p>
</div>
<p class="indent">From there you can choose your repository. Azure will grab the source and dependencies and deploy the application directly, which will then show on your applications Deployments dashboard<a id="cXXX.711"></a> (see <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#Fig9" id="_Fig9">Figure 12-9</a>).</p>
<div class="Figure" id="Fig9">
<p class="img">
<img src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/9781430260585_Fig12-09.jpg" alt="9781430260585_Fig12-09.jpg" width="938" height="286" data-mfp-src="/library/view/nodejs-recipes-a/9781430260585/images/9781430260585_Fig12-09.jpg"></p>
<p class="FigCapt">
<span class="CaptNr">
<a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_Fig9">Figure 12-9</a>. </span>Application deployed </p>
</div>
</div>
<div>
<p id="Sec40" class="Heading2">How It Works</p>
<p class="noindent">Deploying to Windows Azure is similar to the other deployment methods that have been covered in this chapter. The source code will be located via a source control URL, which will then be uploaded to the platform in the cloud. The dependencies will then be installed and the application will start.</p>
<p class="indent">Windows Azure does this through a rich web portal that allows for viewing the data and interactions in real-time via the web as opposed to the previous solutions, which had portals, but most of the interaction that you saw was based in the command line.</p>
<p class="indent">One thing that you can do with your Azure instance is to quickly go online to monitor the status of your application and the resources that it is utilizing. This interface looks similar to that shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#Fig10" id="_Fig10">Figure 12-10</a>. <a id="cXXX.712"></a>
</p>
<div class="Figure" id="Fig10">
<p class="img">
<img src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/9781430260585_Fig12-10.jpg" alt="9781430260585_Fig12-10.jpg" width="825" height="613" data-mfp-src="/library/view/nodejs-recipes-a/9781430260585/images/9781430260585_Fig12-10.jpg"></p>
<p class="FigCapt">
<span class="CaptNr">
<a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_Fig10">Figure 12-10</a>. </span>Window Azure monitoring </p>
</div>
<p class="indent">From the bottom panel of the interface, you can start, stop, and restart<a id="cXXX.713"></a> your Node.js application with the push of a button, as shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#Fig11" id="_Fig11">Figure 12-11</a>.</p>
<div class="Figure" id="Fig11">
<p class="img">
<img src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/9781430260585_Fig12-11.jpg" alt="9781430260585_Fig12-11.jpg" width="938" height="242" data-mfp-src="/library/view/nodejs-recipes-a/9781430260585/images/9781430260585_Fig12-11.jpg"></p>
<p class="FigCapt">
<span class="CaptNr">
<a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_Fig11">Figure 12-11</a>. </span>Start, stop, and restart your Azure application </p>
</div>
<p class="indent">Once you are running your application, you will also want to be able to publish changes to that application quickly. These deployments can be controlled via Azure Git URLs. To find and configure which URLs<a id="cXXX.714"></a> will control your future deployments, navigate to the Configure section of the Azure web portal for your application, as shown in <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#Fig12" id="_Fig12">Figure 12-12</a>.</p>
<div class="Figure" id="Fig12">
<p class="img">
<img src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/9781430260585_Fig12-12.jpg" alt="9781430260585_Fig12-12.jpg" width="938" height="324" data-mfp-src="/library/view/nodejs-recipes-a/9781430260585/images/9781430260585_Fig12-12.jpg"></p>
<p class="FigCapt">
<span class="CaptNr">
<a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#_Fig12">Figure 12-12</a>. </span>Configure deployment URLs for your Azure Node.js application </p>
</div>
<p class="indent">You now have your Node.js application running on the Microsoft Windows Azure<a id="cXXX.709a"></a> cloud. While this solution is slightly different than the previous cloud-hosting platforms that you have seen, you have seen that all of the platforms in this chapter can be wonderful resources for deploying your Node.js applications to the web quickly and efficiently on a web-based platform as a service.</p>
</div>
</div>
<div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders ">
		
		<li class="copy"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#">Add Highlight</a></li>
		<li class="add-note"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#">
			
				Add Note
			
		</a></li>
		
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch11.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">CHAPTER 11: Testing in Node.js</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Index.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">Index</div>
        </a>
    
  
  </div>


        
    </section>
    <div class="reading-controls-bottom">
      <ul class="interface-controls js-bitlist">
        <li class="queue-control">
            <button type="button" class="rec-fav ss-queue js-queue js-current-chapter-queue" data-queue-endpoint="/api/v1/book/9781430260585/chapter/9781430260585_Ch12.xhtml" data-for-analytics="9781430260585:9781430260585_Ch12.xhtml" aria-label="Add to Queue">
      <span>Add to Queue</span>
  </button>
        </li>
      </ul>
    </div>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  





    
    
      <div id="js-subscribe-nag" class="subscribe-nag clearfix trial-panel  collapsed slideUp">
        <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#" class="js-toggle-nag ss-navigateup" title="Toggle open or close footer"></a>
        <div class="sample-message">
          <p class="usage-data t-collapsed-text">Enjoy Safari?
            <a class="ga-active-trial-subscribe-nag" href="https://www.safaribooksonline.com/subscribe/">
              Subscribe Today
              
            </a>
          </p>
          

        <div class="expanded">
          <h2>You have 10 days left in your trial, Raviguru0007. </h2>
          <p class="t-expanded-text">Safari is your trusted guide for building a remarkable career. We hope you've been enjoying your trialready to join?</p>
          <a href="https://www.safaribooksonline.com/subscribe/" class="button-primary">
            Subscribe Today
            
          </a>
          
          <footer class="pagefoot t-pagefoot" style="padding-bottom: 69px;">
    <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#" class="icon-up" style="display: none;"><div class="visuallyhidden">Back to top</div></a>
    <ul class="js-footer-nav">
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="https://www.safaribooksonline.com/contact/">Contact Us</a></li>
      <li><a href="https://www.safaribooksonline.com/blog/">Blog</a></li>
    </ul>
    <span class="copyright"> 2017 <a href="https://www.safaribooksonline.com/" target="_blank">Safari</a>.</span>
    <a href="https://www.safaribooksonline.com/terms/">Terms of Service</a> /
    <a href="https://www.safaribooksonline.com/membership-agreement/">Membership Agreement</a> /
    <a href="https://www.safaribooksonline.com/privacy/">Privacy Policy</a>
  </footer>

        </div>
      </div>
    </div>

    
    



        
      </div>
      




  <footer class="pagefoot t-pagefoot" style="padding-bottom: 69px;">
    <a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#" class="icon-up" style="display: none;"><div class="visuallyhidden">Back to top</div></a>
    <ul class="js-footer-nav">
      
        <li><a class="t-recommendations-footer" href="https://www.safaribooksonline.com/r/">Recommended</a></li>
      
      <li><a class="t-queue-footer" href="https://www.safaribooksonline.com/s/">Queue</a></li>
      
        <li><a class="t-recent-footer" href="https://www.safaribooksonline.com/history/">History</a></li>
        <li><a class="t-topics-footer" href="https://www.safaribooksonline.com/topics?q=*&amp;limit=21">Topics</a></li>
      
      
        <li><a class="t-tutorials-footer" href="https://www.safaribooksonline.com/tutorials/">Tutorials</a></li>
      
      <li><a class="t-settings-footer js-settings" href="https://www.safaribooksonline.com/u/">Settings</a></li>
      <li><a href="https://www.safaribooksonline.com/blog/">Blog</a></li>
      <li class="full-support"><a href="https://www.safaribooksonline.com/public/support">Support</a></li>
      <li><a href="https://www.safaribooksonline.com/apps/">Get the App</a></li>
      <li><a href="https://www.safaribooksonline.com/accounts/logout/">Sign Out</a></li>
    </ul>
    <span class="copyright"> 2017 <a href="https://www.safaribooksonline.com/" target="_blank">Safari</a>.</span>
    <a href="https://www.safaribooksonline.com/terms/">Terms of Service</a> /
    <a href="https://www.safaribooksonline.com/privacy/">Privacy Policy</a>
  </footer>

<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"applicationID":"3275661","errorBeacon":"bam.nr-data.net","agent":"","beacon":"bam.nr-data.net","queueTime":0,"licenseKey":"510f1a6865","applicationTime":503,"transactionName":"YgdaZ0NSW0cEB0RdWltNfkZfUEFdCgofXFBHDVYdR1pQQxZeRl1QQj1aWkU="}</script>


    

    <script src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/saved_resource" charset="utf-8"></script>
    <script src="./CHAPTER 12_ Debugging and Deploying Your Application - Node.js Recipes_ A Problem-Solution Approach_files/saved_resource(1)" charset="utf-8"></script>
  

<div class="annotator-notice"></div><div class="font-flyout" style="top: 200.007px; left: 1217px;"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://www.safaribooksonline.com/library/view/nodejs-recipes-a/9781430260585/9781430260585_Ch12.xhtml#">Reset</a>
</div>
</div></body></html>